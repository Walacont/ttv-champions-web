<!doctype html>
<html lang="de">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Mein Dashboard - TTV Champions</title>

        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-H2R9ZJYQ06"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag('js', new Date());
            gtag('config', 'G-H2R9ZJYQ06');
        </script>

        <script src="https://cdn.tailwindcss.com"></script>
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
            rel="stylesheet"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        />
        <link rel="stylesheet" href="/css/spa-enhancements.css" />
        <link rel="stylesheet" href="/css/tutorial.css" />
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/exceljs@4.4.0/dist/exceljs.min.js"></script>
        <style>
            body {
                font-family: 'Inter', sans-serif;
            }
            #page-loader {
                display: flex;
                justify-content: center;
                align-items: center;
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background-color: #f3f4f6;
                z-index: 9999;
            }
            #main-content,
            #auth-error-container {
                display: none;
            }
            .tab-active {
                border-color: #4f46e5; /* indigo-600 */
                color: #4f46e5;
                background-color: #eef2ff; /* indigo-50 */
            }
            .modal {
                transition: opacity 0.25s ease;
            }
            .league-icon-active {
                transform: scale(1.1);
                border-color: #4f46e5;
            }
            .league-select-btn-active {
                background-color: #4f46e5;
                color: white;
                border-color: #4f46e5;
            }
            .toggle-btn-active {
                background-color: #4f46e5;
                color: white;
            }

            /* Match type toggle buttons */
            .match-type-toggle {
                background-color: transparent;
                color: #6b7280; /* gray-500 */
            }
            .match-type-toggle.active {
                background-color: #4f46e5; /* indigo-600 */
                color: white;
            }

            .calendar-day-present {
                background-color: #10b981;
                color: white;
                border-color: #059669;
            }
            .calendar-day-today {
                ring: 2px;
                ring-color: #4f46e5;
            }
            .calendar-day:not(.disabled) {
                cursor: pointer;
            }
            .calendar-day:not(.disabled):hover {
                background-color: #eef2ff;
            }

            /* Styles f√ºr das ausklappbare FAQ-Men√º */
            details > summary {
                list-style: none;
            }
            details > summary::-webkit-details-marker {
                display: none;
            }
            details[open] summary svg {
                transform: rotate(180deg);
            }

            /* NEU: Hebt das aktive Item in der Spieler-Liste hervor */
            .player-list-item-active {
                background-color: #eef2ff; /* indigo-50 */
                border-right: 3px solid #4f46e5; /* indigo-600 */
            }
        </style>
    </head>
    <body class="bg-gray-100 text-gray-800">
        <div id="page-loader">
            <div class="text-center">
                <svg
                    class="animate-spin h-10 w-10 text-indigo-600 mx-auto"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                >
                    <circle
                        class="opacity-25"
                        cx="12"
                        cy="12"
                        r="10"
                        stroke="currentColor"
                        stroke-width="4"
                    ></circle>
                    <path
                        class="opacity-75"
                        fill="currentColor"
                        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                    ></path>
                </svg>
                <p id="loader-text" class="mt-4 text-sm font-medium text-gray-600">Lade Daten...</p>
            </div>
        </div>

        <div id="auth-error-container" class="hidden items-center justify-center fixed inset-0">
            <div class="text-center p-8 bg-white rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-red-600 mb-4">Zugriff verweigert</h2>
                <p id="auth-error-message" class="text-gray-700">
                    Die Seite konnte nicht geladen werden.
                </p>
                <button
                    id="error-logout-button"
                    class="mt-6 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg"
                >
                    Zur√ºck zum Login
                </button>
            </div>
        </div>

        <div id="main-content" class="container mx-auto p-4 sm:p-6 md:p-8 max-w-7xl">
            <header class="mb-6">
                <!-- Top Row: Profile + Title + Settings/Logout -->
                <div class="flex justify-between items-start mb-4">
                    <div class="flex items-start gap-3 flex-1">
                        <!-- Profile Picture -->
                        <img id="header-profile-pic" src="" alt="Profilbild"
                             class="h-14 w-14 rounded-full object-cover border-2 border-indigo-200 shadow-md flex-shrink-0">

                        <!-- Title and Club Info -->
                        <div class="flex-1">
                            <h1 class="text-2xl sm:text-3xl font-bold text-gray-900">
                                Coach Dashboard
                            </h1>
                            <p id="welcome-message" class="text-sm sm:text-base text-gray-600">
                                Willkommen zur√ºck!
                            </p>
                            <p id="header-club-info" class="text-xs sm:text-sm text-gray-500 mt-1">
                                <i class="fas fa-building mr-1"></i><span id="header-club-name">Lade...</span>
                            </p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-3 sm:space-x-4">
                        <a
                            href="/settings.html"
                            class="text-gray-500 hover:text-gray-800 transition-colors"
                            title="Einstellungen"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="h-5 w-5 sm:h-6 sm:w-6"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke="currentColor"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
                                ></path>
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                                ></path>
                            </svg>
                        </a>
                        <button
                            id="logout-button"
                            class="bg-red-500 hover:bg-red-600 text-white font-bold py-1.5 px-3 sm:py-2 sm:px-4 text-sm rounded-lg shadow transition-transform transform hover:scale-105"
                        >
                            Logout
                        </button>
                    </div>
                </div>

                <!-- Second Row: Gruppen-Switcher (Full Width on Mobile) -->
                <div
                    class="flex items-center gap-2 bg-gray-50 border border-gray-200 rounded-lg p-3 shadow-sm"
                >
                    <label
                        for="subgroup-filter"
                        class="text-sm font-medium text-gray-700 whitespace-nowrap"
                    >
                        üë• Ansicht:
                    </label>
                    <select
                        id="subgroup-filter"
                        class="flex-1 px-3 py-2 text-sm border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 rounded-md shadow-sm bg-white"
                    >
                        <option value="all">Alle (Gesamtverein)</option>
                    </select>
                </div>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                <button
                    id="open-player-modal-button"
                    class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105 flex items-center justify-center space-x-2"
                >
                    <i class="fas fa-users"></i>
                    <span>Spieler verwalten</span>
                </button>
                <button
                    id="add-offline-player-button"
                    class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105 flex items-center justify-center space-x-2"
                >
                    <i class="fas fa-user-plus"></i>
                    <span>Offline-Spieler erstellen</span>
                </button>
                <button
                    id="manage-invitation-codes-button"
                    class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105 flex items-center justify-center space-x-2"
                >
                    <i class="fas fa-key"></i>
                    <span>Codes verwalten</span>
                </button>
            </div>

            <div class="mb-6 border-b border-gray-200">
                <nav id="main-nav" class="-mb-px flex space-x-6 overflow-x-auto">
                    <button
                        class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300"
                        data-tab="statistics"
                    >
                        Statistik
                    </button>
                    <button
                        class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300"
                        data-tab="dashboard"
                    >
                        Rangliste
                    </button>
                    <button
                        class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300"
                        data-tab="attendance"
                    >
                        Kalender & Anwesenheit
                    </button>
                    <!-- Trainingsplan tab temporarily hidden - will be re-enabled with recurring trainings later
                <button class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300" data-tab="schedule">
                    üìÖ Trainingsplan
                </button>
                -->
                    <button
                        class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300"
                        data-tab="matches"
                    >
                        Wettkampf
                    </button>
                    <button
                        class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300"
                        data-tab="points"
                    >
                        Punkte vergeben
                    </button>
                    <button
                        class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300"
                        data-tab="challenges"
                    >
                        Challenges
                    </button>
                    <button
                        class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300"
                        data-tab="exercises"
                    >
                        √úbungen
                    </button>
                    <button
                        class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300"
                        data-tab="subgroups"
                    >
                        üë• Gruppen
                    </button>
                </nav>
            </div>

            <main>
                <div id="tab-content-dashboard" class="tab-content"></div>

                <div id="tab-content-attendance" class="tab-content hidden">
                    <div class="bg-white p-6 rounded-xl shadow-md max-w-3xl mx-auto">
                        <div class="flex justify-between items-center mb-4">
                            <button id="prev-month-btn" class="p-2 rounded-full hover:bg-gray-200">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <h2 id="calendar-month-year" class="text-xl font-bold"></h2>
                            <button id="next-month-btn" class="p-2 rounded-full hover:bg-gray-200">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <div class="flex justify-end gap-2 mb-4">
                            <button
                                id="export-attendance-btn"
                                class="bg-green-600 hover:bg-green-700 text-white text-sm font-medium py-2 px-4 rounded-lg shadow transition-all flex items-center gap-2"
                                title="Anwesenheit als Excel exportieren"
                            >
                                <i class="fas fa-file-excel"></i>
                                <span>Als Excel exportieren</span>
                            </button>
                            <button
                                id="export-attendance-summary-btn"
                                class="bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium py-2 px-4 rounded-lg shadow transition-all flex items-center gap-2"
                                title="Zusammenfassung exportieren"
                            >
                                <i class="fas fa-chart-bar"></i>
                                <span>Zusammenfassung</span>
                            </button>
                        </div>
                        <div id="export-loading" class="hidden text-center py-2 text-indigo-600">
                            <i class="fas fa-spinner fa-spin mr-2"></i>
                            <span>Excel wird erstellt...</span>
                        </div>
                        <div
                            class="grid grid-cols-7 gap-2 text-center text-sm font-semibold text-gray-500 mb-2"
                        >
                            <div>Mo</div>
                            <div>Di</div>
                            <div>Mi</div>
                            <div>Do</div>
                            <div>Fr</div>
                            <div>Sa</div>
                            <div>So</div>
                        </div>
                        <div id="calendar-grid" class="grid grid-cols-7 gap-2"></div>
                    </div>
                </div>

                <!-- Trainingsplan tab content - hidden for now, will be re-enabled with recurring trainings later
            <div id="tab-content-schedule" class="tab-content hidden">
                <div class="bg-white p-6 rounded-xl shadow-md max-w-4xl mx-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Wiederkehrende Trainings</h2>
                        <button id="add-recurring-training-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105 flex items-center space-x-2">
                            <i class="fas fa-plus"></i>
                            <span>Neues Training</span>
                        </button>
                    </div>

                    <div id="recurring-trainings-list" class="space-y-3">

                    </div>

                    <div id="no-trainings-message" class="text-center py-12 text-gray-500 hidden">
                        <i class="fas fa-calendar-alt text-6xl mb-4 text-gray-300"></i>
                        <p class="text-lg">Noch keine wiederkehrenden Trainings eingerichtet</p>
                        <p class="text-sm mt-2">Klicke auf "Neues Training", um ein wiederkehrendes Training hinzuzuf√ºgen</p>
                    </div>
                </div>
            </div>
            -->

                <div id="tab-content-matches" class="tab-content hidden">
                    <div class="space-y-8">
                        <!-- Saved Pairings Section -->
                        <div class="bg-white p-6 rounded-xl shadow-md max-w-2xl mx-auto">
                            <h2 class="text-xl font-semibold mb-4">Gespeicherte Paarungen</h2>
                            <p class="text-sm text-gray-600 mb-4">
                                Hier siehst du alle gespeicherten Paarungen aus den Trainings. Du
                                kannst entweder das Ergebnis eingeben oder die Paarung verwerfen.
                            </p>
                            <div id="saved-pairings-container" class="space-y-4">
                                <p class="text-center text-gray-500 py-8">
                                    Lade gespeicherte Paarungen...
                                </p>
                            </div>
                        </div>

                        <!-- Coach Match Reporting Form -->
                        <div class="bg-white p-6 rounded-xl shadow-md max-w-2xl mx-auto">
                            <h2 class="text-xl font-semibold mb-4">
                                Wettkampf-Match melden (Coach)
                            </h2>
                            <p class="text-sm text-gray-600 mb-4">
                                W√§hle Spieler aus, um ein Match zu melden. Das System berechnet
                                automatisch einen Handicap-Vorschlag, um das Spiel fairer zu
                                gestalten.
                            </p>
                            <form id="match-form" class="space-y-4">
                                <!-- Match Type Toggle (Singles/Doubles) -->
                                <div class="flex justify-center mb-6">
                                    <div
                                        class="inline-flex rounded-lg border border-gray-300 bg-gray-50 p-1"
                                    >
                                        <button
                                            type="button"
                                            id="singles-toggle"
                                            class="match-type-toggle active px-6 py-2 rounded-md text-sm font-medium transition-all"
                                        >
                                            <i class="fas fa-user mr-2"></i>Einzel
                                        </button>
                                        <button
                                            type="button"
                                            id="doubles-toggle"
                                            class="match-type-toggle px-6 py-2 rounded-md text-sm font-medium transition-all"
                                        >
                                            <i class="fas fa-users mr-2"></i>Doppel
                                        </button>
                                    </div>
                                </div>

                                <!-- Match Mode Selection -->
                                <div>
                                    <label
                                        for="coach-match-mode-select"
                                        class="block text-sm font-medium text-gray-700 mb-2"
                                    >
                                        Spielmodus
                                    </label>
                                    <select
                                        id="coach-match-mode-select"
                                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white"
                                    >
                                        <option value="single-set">1 Satz</option>
                                        <option value="best-of-3">Best of 3</option>
                                        <option value="best-of-5" selected>
                                            Best of 5 (Standard)
                                        </option>
                                        <option value="best-of-7">Best of 7</option>
                                    </select>
                                </div>

                                <!-- Singles Players (default) -->
                                <div
                                    id="singles-players-container"
                                    class="grid grid-cols-1 md:grid-cols-2 gap-4"
                                >
                                    <div>
                                        <label
                                            for="player-a-select"
                                            class="block text-sm font-medium text-gray-700"
                                            >Spieler A</label
                                        >
                                        <select
                                            id="player-a-select"
                                            class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                                        ></select>
                                    </div>
                                    <div>
                                        <label
                                            for="player-b-select"
                                            class="block text-sm font-medium text-gray-700"
                                            >Spieler B</label
                                        >
                                        <select
                                            id="player-b-select"
                                            class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                                        ></select>
                                    </div>
                                </div>

                                <!-- Doubles Players (hidden by default) -->
                                <div id="doubles-players-container" class="hidden space-y-4">
                                    <div
                                        class="border-2 border-indigo-100 rounded-lg p-4 bg-indigo-50"
                                    >
                                        <h3 class="text-md font-semibold text-indigo-800 mb-3">
                                            <i class="fas fa-user-friends mr-2"></i>Team A
                                        </h3>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div>
                                                <label
                                                    for="doubles-team-a-player1-select"
                                                    class="block text-sm font-medium text-gray-700"
                                                    >Spieler 1</label
                                                >
                                                <select
                                                    id="doubles-team-a-player1-select"
                                                    class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                                                ></select>
                                            </div>
                                            <div>
                                                <label
                                                    for="doubles-team-a-player2-select"
                                                    class="block text-sm font-medium text-gray-700"
                                                    >Spieler 2</label
                                                >
                                                <select
                                                    id="doubles-team-a-player2-select"
                                                    class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                                                ></select>
                                            </div>
                                        </div>
                                    </div>
                                    <div
                                        class="border-2 border-orange-100 rounded-lg p-4 bg-orange-50"
                                    >
                                        <h3 class="text-md font-semibold text-orange-800 mb-3">
                                            <i class="fas fa-user-friends mr-2"></i>Team B
                                        </h3>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div>
                                                <label
                                                    for="doubles-team-b-player1-select"
                                                    class="block text-sm font-medium text-gray-700"
                                                    >Spieler 1</label
                                                >
                                                <select
                                                    id="doubles-team-b-player1-select"
                                                    class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                                                ></select>
                                            </div>
                                            <div>
                                                <label
                                                    for="doubles-team-b-player2-select"
                                                    class="block text-sm font-medium text-gray-700"
                                                    >Spieler 2</label
                                                >
                                                <select
                                                    id="doubles-team-b-player2-select"
                                                    class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                                                ></select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div
                                    id="handicap-suggestion"
                                    class="p-3 bg-indigo-50 rounded-md text-center hidden"
                                >
                                    <p class="text-sm font-medium text-indigo-800">
                                        Handicap-Vorschlag:
                                        <span id="handicap-text" class="font-bold"></span>
                                    </p>
                                </div>

                                <div id="handicap-toggle-container" class="py-2 hidden">
                                    <label
                                        for="handicap-toggle"
                                        class="flex items-center justify-center cursor-pointer"
                                    >
                                        <div class="relative">
                                            <input
                                                type="checkbox"
                                                id="handicap-toggle"
                                                class="sr-only peer"
                                            />
                                            <div
                                                class="w-14 h-8 bg-gray-300 rounded-full peer-checked:bg-green-500 transition-colors"
                                            ></div>
                                            <div
                                                class="absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform transform peer-checked:translate-x-full"
                                            ></div>
                                        </div>
                                        <div class="ml-3 text-gray-700 font-medium">
                                            Wurde der Handicap-Vorschlag angewendet?
                                        </div>
                                    </label>
                                </div>

                                <!-- Set Score Input Container -->
                                <div>
                                    <label
                                        id="coach-set-score-label"
                                        class="block text-sm font-medium text-gray-700 mb-2"
                                        >Satzergebnisse</label
                                    >
                                    <div id="coach-set-score-container" class="space-y-2"></div>
                                    <p class="text-xs text-gray-500 mt-2">
                                        Der Gewinner wird automatisch aus den Satzergebnissen
                                        ermittelt.
                                    </p>
                                </div>

                                <button
                                    type="submit"
                                    class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg"
                                >
                                    Match-Ergebnis speichern
                                </button>
                                <p
                                    id="match-feedback"
                                    class="mt-3 text-sm font-medium text-center"
                                ></p>
                            </form>
                        </div>
                    </div>
                </div>

                <div id="tab-content-points" class="tab-content hidden">
                    <details class="mb-6 bg-white rounded-xl shadow-md">
                        <summary class="flex justify-between items-center cursor-pointer p-6">
                            <h2 class="text-xl font-semibold text-gray-900">
                                <i class="fas fa-book-open text-indigo-600 mr-3"></i> Regeln &
                                Punktesystem (Anzeigen/Verstecken)
                            </h2>
                            <svg
                                class="h-6 w-6 transform transition-transform"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke="currentColor"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M19 9l-7 7-7-7"
                                />
                            </svg>
                        </summary>
                        <div class="p-6 border-t border-gray-200 space-y-6">
                            <div>
                                <h2 class="text-xl font-semibold mb-4 border-b pb-2">
                                    Das Punktesystem
                                </h2>
                                <div class="space-y-4">
                                    <details class="group">
                                        <summary
                                            class="flex justify-between items-center cursor-pointer"
                                        >
                                            <span class="font-medium"
                                                >Was ist der Unterschied zwischen Elo, XP und
                                                Saison-Punkten?</span
                                            >
                                            <svg
                                                class="h-6 w-6 transform transition-transform group-open:rotate-180"
                                                fill="none"
                                                viewBox="0 0 24 24"
                                                stroke="currentColor"
                                            >
                                                <path
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    stroke-width="2"
                                                    d="M19 9l-7 7-7-7"
                                                />
                                            </svg>
                                        </summary>
                                        <div class="mt-2 text-gray-700">
                                            Es gibt drei Arten von Punkten, die du sammelst:
                                            <ul class="list-disc list-inside mt-2 space-y-2">
                                                <li>
                                                    <strong>‚ö° Skill (Elo):</strong> Dies ist deine
                                                    permanente Spielst√§rke. Du startest mit
                                                    <strong>800 Elo-Punkten</strong>. Du gewinnst
                                                    Elo, indem du Wettkampf-Matches gegen andere
                                                    gewinnst. Du verlierst Elo, wenn du verlierst.
                                                    <strong>Wichtig:</strong> Sobald du bestimmte
                                                    Elo-Meilensteine erreichst (850, 900, 1000,
                                                    1100, 1300, 1600), kannst du nicht mehr darunter
                                                    fallen ‚Äì das sind deine "Sicherheitsnetze". Dein
                                                    Elo-Wert bestimmt ma√ügeblich deinen Rang.
                                                </li>
                                                <li>
                                                    <strong>üí™ Flei√ü (XP):</strong> Das sind deine
                                                    permanenten Erfahrungspunkte. Du erh√§ltst XP f√ºr
                                                    fast alles: Anwesenheit, √úbungen, Challenges und
                                                    Match-Siege.
                                                    <strong>XP werden nie abgezogen</strong> ‚Äì du
                                                    kannst sie nur gewinnen! XP sind (genau wie Elo)
                                                    f√ºr deinen Rangaufstieg n√∂tig. Allerdings k√∂nnen
                                                    Strafen f√ºr unsportliches Verhalten auch XP
                                                    kosten (siehe unten).
                                                </li>
                                                <li>
                                                    <strong>üèÜ Saison-Punkte:</strong> Diese Punkte
                                                    sind nur f√ºr den "Saison-Wettbewerb" (alle 6
                                                    Wochen). Sie werden f√ºr Anwesenheit, √úbungen,
                                                    Challenges und Matches vergeben. Im Gegensatz zu
                                                    XP kannst du Saison-Punkte bei Match-Niederlagen
                                                    oder durch Strafen verlieren. Am Ende der Saison
                                                    werden sie zur√ºckgesetzt.
                                                </li>
                                            </ul>
                                        </div>
                                    </details>
                                    <details class="group">
                                        <summary
                                            class="flex justify-between items-center cursor-pointer"
                                        >
                                            <span class="font-medium"
                                                >Wie funktionieren die Punkte bei
                                                Einzel-Matches?</span
                                            >
                                            <svg
                                                class="h-6 w-6 transform transition-transform group-open:rotate-180"
                                                fill="none"
                                                viewBox="0 0 24 24"
                                                stroke="currentColor"
                                            >
                                                <path
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    stroke-width="2"
                                                    d="M19 9l-7 7-7-7"
                                                />
                                            </svg>
                                        </summary>
                                        <div class="mt-2 text-gray-700">
                                            <p>
                                                Wenn ein Spieler ein Wettkampf-Match (kein
                                                Handicap-Match) spielt, werden seine
                                                <strong>Elo-Punkte</strong> und
                                                <strong>Saison-Punkte</strong> angepasst. Seine
                                                <strong>XP</strong> k√∂nnen nur steigen.
                                            </p>
                                            <ul class="list-disc list-inside mt-2 space-y-1">
                                                <li>
                                                    <strong>Sieg:</strong> Spieler gewinnt
                                                    Elo-Punkte, Saison-Punkte und XP.
                                                </li>
                                                <li>
                                                    <strong>Niederlage:</strong> Spieler verliert
                                                    Elo-Punkte und Saison-Punkte. Er verliert
                                                    <strong>keine</strong> XP.
                                                </li>
                                                <li>
                                                    <strong>Fairness:</strong> Gewinnt der Spieler
                                                    gegen einen st√§rkeren Gegner (h√∂heres Elo),
                                                    erh√§lt er mehr Punkte. Verliert er gegen einen
                                                    st√§rkeren Gegner, verliert er nur wenige Punkte.
                                                </li>
                                            </ul>
                                            <p class="mt-2">
                                                <strong>Wichtig f√ºr Rekruten:</strong> Als Rekrut
                                                (niedrigster Rang) m√ºssen Spieler erst
                                                <strong>5 Grundlagen-√úbungen</strong> abschlie√üen,
                                                bevor sie Wettkampf-Matches spielen d√ºrfen!
                                            </p>
                                        </div>
                                    </details>

                                    <details class="group">
                                        <summary
                                            class="flex justify-between items-center cursor-pointer"
                                        >
                                            <span class="font-medium"
                                                >üéæ Wie funktionieren Doppel-Matches?</span
                                            >
                                            <svg
                                                class="h-6 w-6 transform transition-transform group-open:rotate-180"
                                                fill="none"
                                                viewBox="0 0 24 24"
                                                stroke="currentColor"
                                            >
                                                <path
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    stroke-width="2"
                                                    d="M19 9l-7 7-7-7"
                                                />
                                            </svg>
                                        </summary>
                                        <div class="mt-2 text-gray-700">
                                            <p>
                                                Neben Einzel-Matches k√∂nnen Spieler auch
                                                <strong>Doppel-Matches</strong> spielen! Im Doppel
                                                spielen zwei Spieler gemeinsam gegen ein anderes
                                                Team.
                                            </p>

                                            <p class="mt-3"><strong>üìã Der Ablauf:</strong></p>
                                            <ul class="list-disc list-inside mt-2 space-y-1">
                                                <li>
                                                    <strong>Team bilden:</strong> Ein Spieler w√§hlt
                                                    einen Partner (Team A) und zwei Gegner (Team B)
                                                </li>
                                                <li>
                                                    <strong>Anfrage senden:</strong> Das Gegner-Team
                                                    muss die Anfrage best√§tigen
                                                </li>
                                                <li>
                                                    <strong>Coach-Genehmigung:</strong> Du musst das
                                                    Match genehmigen und das Ergebnis eintragen
                                                </li>
                                                <li>
                                                    <strong>Punkte:</strong> Alle 4 Spieler erhalten
                                                    oder verlieren Doppel-Elo-Punkte
                                                </li>
                                            </ul>

                                            <p class="mt-3">
                                                <strong>‚ö° Doppel-Elo-System:</strong>
                                            </p>
                                            <ul class="list-disc list-inside mt-2 space-y-1">
                                                <li>
                                                    Jeder Spieler hat ein
                                                    <strong>separates Doppel-Elo</strong> (startet
                                                    bei 800), unabh√§ngig vom Einzel-Elo
                                                </li>
                                                <li>
                                                    Das Team-Elo wird aus dem Durchschnitt der
                                                    beiden Spieler berechnet
                                                </li>
                                                <li>
                                                    <strong>Beispiel:</strong> Spieler A (Doppel-Elo
                                                    900) + Spieler B (Doppel-Elo 1000) = Team-Elo
                                                    950
                                                </li>
                                                <li>
                                                    Wie beim Einzel gilt: Gewinne gegen st√§rkere
                                                    Teams bringen mehr Punkte
                                                </li>
                                            </ul>

                                            <p class="mt-3">
                                                <strong>üèÜ Doppel-Rangliste:</strong>
                                            </p>
                                            <p class="mt-1">
                                                Es gibt eine eigene Doppel-Rangliste im
                                                <strong>Ranglisten-Tab</strong>, die zeigt, welche
                                                Teams die besten Doppel-Elo-Werte haben!
                                            </p>

                                            <p class="mt-3">
                                                <strong>üìä Punkte-Berechnung:</strong>
                                            </p>
                                            <ul class="list-disc list-inside mt-2 space-y-1">
                                                <li>
                                                    <strong>Sieg:</strong> Beide Spieler des
                                                    Gewinnerteams erhalten Doppel-Elo und
                                                    Saison-Punkte
                                                </li>
                                                <li>
                                                    <strong>Niederlage:</strong> Beide Spieler des
                                                    Verliererteams verlieren Doppel-Elo und
                                                    Saison-Punkte
                                                </li>
                                                <li>
                                                    <strong>XP:</strong> Nur das Gewinnerteam erh√§lt
                                                    XP (kein XP-Verlust bei Niederlage)
                                                </li>
                                                <li>
                                                    <strong>Handicap:</strong> Doppel-Matches k√∂nnen
                                                    auch mit Handicap gespielt werden (keine
                                                    Elo-√Ñnderung)
                                                </li>
                                            </ul>

                                            <p class="mt-3"><strong>üë®‚Äçüè´ F√ºr Coaches:</strong></p>
                                            <ul
                                                class="list-disc list-inside mt-2 space-y-1 bg-indigo-50 p-3 rounded"
                                            >
                                                <li>
                                                    Doppel-Anfragen findest du im
                                                    <strong>Wettkampf-Tab</strong> unter "Doppel"
                                                </li>
                                                <li>
                                                    Du kannst das Ergebnis eintragen und
                                                    entscheiden, ob Handicap verwendet wurde
                                                </li>
                                                <li>
                                                    Du kannst auch selbst Doppel-Matches f√ºr Spieler
                                                    eintragen (z.B. bei offiziellen Turnieren)
                                                </li>
                                                <li>
                                                    Die Doppel-Historie jedes Spielers wird
                                                    automatisch protokolliert
                                                </li>
                                            </ul>

                                            <p class="mt-3">
                                                <strong>üí° Tipp:</strong> Doppel-Matches sind eine
                                                gro√üartige M√∂glichkeit f√ºr Spieler, Teamwork zu
                                                trainieren und neue Spielstile kennenzulernen!
                                            </p>
                                        </div>
                                    </details>
                                    <details class="group">
                                        <summary
                                            class="flex justify-between items-center cursor-pointer"
                                        >
                                            <span class="font-medium"
                                                >Kann ich auch Punkte verlieren?</span
                                            >
                                            <svg
                                                class="h-6 w-6 transform transition-transform group-open:rotate-180"
                                                fill="none"
                                                viewBox="0 0 24 24"
                                                stroke="currentColor"
                                            >
                                                <path
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    stroke-width="2"
                                                    d="M19 9l-7 7-7-7"
                                                />
                                            </svg>
                                        </summary>
                                        <div class="mt-2 text-gray-700">
                                            Ja, du kannst Punkte verlieren ‚Äì sogar
                                            <strong>XP</strong>, aber nur bei schweren Verst√∂√üen!
                                            <ul class="list-disc list-inside mt-2 space-y-2">
                                                <li>
                                                    <strong>Match-Niederlage:</strong> Du verlierst
                                                    Elo und Saison-Punkte (siehe oben). Du verlierst
                                                    <strong>keine</strong> XP.
                                                </li>
                                                <li>
                                                    <strong
                                                        >Leichte Verst√∂√üe (z.B. h√∂rt nicht auf
                                                        Anweisungen, hilft nicht beim
                                                        Aufbauen):</strong
                                                    ><br />
                                                    <strong>-10 Saison-Punkte</strong> und
                                                    <strong>-5 XP</strong>
                                                </li>
                                                <li>
                                                    <strong
                                                        >Mittlere Verst√∂√üe (z.B. trainiert nicht
                                                        ordentlich, macht Quatsch, wirft mit
                                                        B√§llen):</strong
                                                    ><br />
                                                    <strong>-20 Saison-Punkte</strong> und
                                                    <strong>-10 XP</strong>
                                                </li>
                                                <li>
                                                    <strong
                                                        >Schwere Verst√∂√üe (z.B. respektloses
                                                        Verhalten gegen√ºber Trainern oder
                                                        Mitspielern):</strong
                                                    ><br />
                                                    <strong>-30 Saison-Punkte</strong> und
                                                    <strong>-20 XP</strong>
                                                </li>
                                            </ul>
                                            <p class="mt-2">
                                                <strong>Wichtig:</strong> Strafen treffen dich
                                                doppelt ‚Äì sie ziehen sowohl Saison-Punkte als auch
                                                XP ab. Also: Fair bleiben und respektvoll
                                                miteinander umgehen!
                                            </p>
                                        </div>
                                    </details>
                                </div>
                            </div>
                            <div>
                                <h2 class="text-xl font-semibold mb-4 border-b pb-2">
                                    Spielmechaniken
                                </h2>
                                <div class="space-y-4">
                                    <details class="group">
                                        <summary
                                            class="flex justify-between items-center cursor-pointer"
                                        >
                                            <span class="font-medium"
                                                >üìÖ Wie funktioniert das
                                                Anwesenheits-Punktesystem?</span
                                            >
                                            <svg
                                                class="h-6 w-6 transform transition-transform group-open:rotate-180"
                                                fill="none"
                                                viewBox="0 0 24 24"
                                                stroke="currentColor"
                                            >
                                                <path
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    stroke-width="2"
                                                    d="M19 9l-7 7-7-7"
                                                />
                                            </svg>
                                        </summary>
                                        <div class="mt-2 text-gray-700 space-y-3">
                                            <div>
                                                <p class="font-semibold mb-1">
                                                    Punkte pro Training (Saison & XP):
                                                </p>
                                                <ul
                                                    class="list-disc list-inside ml-2 space-y-1 text-sm"
                                                >
                                                    <li>
                                                        <strong>+3 Punkte:</strong> Normale
                                                        Anwesenheit (1-2x Streak)
                                                    </li>
                                                    <li>
                                                        <strong>+5 Punkte:</strong> Streak-Bonus
                                                        (3-4x Streak) ‚ö°
                                                    </li>
                                                    <li>
                                                        <strong>+6 Punkte:</strong> Super-Streak
                                                        (5x+ Streak) üî•
                                                    </li>
                                                </ul>
                                            </div>
                                            <div>
                                                <p class="font-semibold mb-1">
                                                    Mehrfach-Training am selben Tag:
                                                </p>
                                                <ul
                                                    class="list-disc list-inside ml-2 space-y-1 text-sm"
                                                >
                                                    <li>
                                                        <strong>1. Training:</strong> Volle Punkte
                                                        (3/5/6)
                                                    </li>
                                                    <li>
                                                        <strong>2.+ Training:</strong> Halbe Punkte,
                                                        aufgerundet (2/3/3)
                                                    </li>
                                                </ul>
                                                <p class="mt-2 text-sm italic text-gray-600">
                                                    Beispiel: Spieler besucht Basis-Training (16-17
                                                    Uhr) mit 5x Streak = 6 Punkte. Dann
                                                    Leistungs-Training (17-18 Uhr) am selben Tag = 3
                                                    Punkte (halbe Punkte).
                                                </p>
                                            </div>
                                            <div>
                                                <p class="font-semibold mb-1">System-Details:</p>
                                                <ul
                                                    class="list-disc list-inside ml-2 space-y-1 text-sm"
                                                >
                                                    <li>
                                                        Datum wird in Historie angezeigt: "Training
                                                        am DD.MM.YYYY - Untergruppe"
                                                    </li>
                                                    <li>
                                                        2. Training wird markiert: "(2. Training
                                                        heute)"
                                                    </li>
                                                    <li>
                                                        Streak-Bonus wird angezeigt: "(‚ö° 3x
                                                        Streak)" oder "(üî• 5x Streak!)"
                                                    </li>
                                                    <li>
                                                        Bei abgesagtem Training werden Punkte
                                                        automatisch korrigiert
                                                    </li>
                                                </ul>
                                            </div>
                                            <p class="mt-2">
                                                <strong>‚ö†Ô∏è Wichtig:</strong> Wenn ein Training
                                                verpasst wird, wird der Streak auf Null
                                                zur√ºckgesetzt. Regelm√§√üiges Training lohnt sich!
                                            </p>
                                        </div>
                                    </details>

                                    <details class="group">
                                        <summary
                                            class="flex justify-between items-center cursor-pointer"
                                        >
                                            <span class="font-medium"
                                                >Wie funktionieren √úbungen und Punkte?</span
                                            >
                                            <svg
                                                class="h-6 w-6 transform transition-transform group-open:rotate-180"
                                                fill="none"
                                                viewBox="0 0 24 24"
                                                stroke="currentColor"
                                            >
                                                <path
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    stroke-width="2"
                                                    d="M19 9l-7 7-7-7"
                                                />
                                            </svg>
                                        </summary>
                                        <div class="mt-2 text-gray-700">
                                            <p>
                                                √úbungen sind in
                                                <strong>drei Schwierigkeitsstufen</strong>
                                                eingeteilt: Leicht, Mittel und Schwer. Die Punkte,
                                                die du erh√§ltst, h√§ngen sowohl von der Schwierigkeit
                                                der √úbung als auch von deinem aktuellen Level ab:
                                            </p>

                                            <div class="mt-2 overflow-x-auto">
                                                <table
                                                    class="min-w-full border border-gray-300 text-sm"
                                                >
                                                    <thead class="bg-gray-100">
                                                        <tr>
                                                            <th
                                                                class="border border-gray-300 px-2 py-1"
                                                            >
                                                                Dein Level
                                                            </th>
                                                            <th
                                                                class="border border-gray-300 px-2 py-1"
                                                            >
                                                                Leichte √úbung
                                                            </th>
                                                            <th
                                                                class="border border-gray-300 px-2 py-1"
                                                            >
                                                                Mittlere √úbung
                                                            </th>
                                                            <th
                                                                class="border border-gray-300 px-2 py-1"
                                                            >
                                                                Schwere √úbung
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td
                                                                class="border border-gray-300 px-2 py-1"
                                                            >
                                                                Rekrut/Bronze
                                                            </td>
                                                            <td
                                                                class="border border-gray-300 px-2 py-1 text-center"
                                                            >
                                                                5 P.
                                                            </td>
                                                            <td
                                                                class="border border-gray-300 px-2 py-1 text-center"
                                                            >
                                                                8 P.
                                                            </td>
                                                            <td
                                                                class="border border-gray-300 px-2 py-1 text-center"
                                                            >
                                                                10 P.
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td
                                                                class="border border-gray-300 px-2 py-1"
                                                            >
                                                                Silber/Gold
                                                            </td>
                                                            <td
                                                                class="border border-gray-300 px-2 py-1 text-center"
                                                            >
                                                                6 P.
                                                            </td>
                                                            <td
                                                                class="border border-gray-300 px-2 py-1 text-center"
                                                            >
                                                                10 P.
                                                            </td>
                                                            <td
                                                                class="border border-gray-300 px-2 py-1 text-center"
                                                            >
                                                                12 P.
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td
                                                                class="border border-gray-300 px-2 py-1"
                                                            >
                                                                Platin/Champion
                                                            </td>
                                                            <td
                                                                class="border border-gray-300 px-2 py-1 text-center"
                                                            >
                                                                8 P.
                                                            </td>
                                                            <td
                                                                class="border border-gray-300 px-2 py-1 text-center"
                                                            >
                                                                12 P.
                                                            </td>
                                                            <td
                                                                class="border border-gray-300 px-2 py-1 text-center"
                                                            >
                                                                18 P.
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>

                                            <p class="mt-2">
                                                <strong>Wichtig:</strong> Je h√∂her dein Level, desto
                                                mehr Punkte bekommst du f√ºr dieselbe √úbung. Das
                                                System berechnet die Punkte automatisch basierend
                                                auf deinem aktuellen Rang und der
                                                √úbungsschwierigkeit.
                                            </p>
                                            <p class="mt-2">
                                                Du erh√§ltst sowohl
                                                <strong>Saison-Punkte</strong> als auch
                                                <strong>XP</strong> in gleicher H√∂he.
                                            </p>
                                        </div>
                                    </details>

                                    <details class="group">
                                        <summary
                                            class="flex justify-between items-center cursor-pointer"
                                        >
                                            <span class="font-medium"
                                                >‚ú® Was sind Meilenstein-√úbungen und
                                                -Challenges?</span
                                            >
                                            <svg
                                                class="h-6 w-6 transform transition-transform group-open:rotate-180"
                                                fill="none"
                                                viewBox="0 0 24 24"
                                                stroke="currentColor"
                                            >
                                                <path
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    stroke-width="2"
                                                    d="M19 9l-7 7-7-7"
                                                />
                                            </svg>
                                        </summary>
                                        <div class="mt-2 text-gray-700">
                                            <p>
                                                Manche √úbungen und Challenges verwenden ein
                                                <strong>abgestuftes Punktesystem</strong> mit
                                                Meilensteinen. Das bedeutet: Je √∂fter ein Spieler
                                                eine √úbung schafft, desto mehr Punkte kann er
                                                insgesamt verdienen!
                                            </p>

                                            <p class="mt-3">
                                                <strong>üìä Beispiel: Endlos-Aufschlag-√úbung</strong>
                                            </p>
                                            <ul
                                                class="list-disc list-inside mt-2 space-y-1 bg-indigo-50 p-3 rounded"
                                            >
                                                <li>1√ó geschafft ‚Üí <strong>3 Punkte</strong></li>
                                                <li>
                                                    3√ó geschafft ‚Üí
                                                    <strong>+5 Punkte</strong> (insgesamt 8 Punkte)
                                                </li>
                                                <li>
                                                    5√ó geschafft ‚Üí
                                                    <strong>+8 Punkte</strong> (insgesamt 16 Punkte)
                                                </li>
                                            </ul>

                                            <p class="mt-3">
                                                <strong>üéØ So vergibst du Punkte als Coach:</strong>
                                            </p>
                                            <ul
                                                class="list-disc list-inside mt-2 space-y-1 bg-gray-50 p-3 rounded"
                                            >
                                                <li>
                                                    Bei Meilenstein-√úbungen w√§hlst du aus,
                                                    <strong>welchen Meilenstein</strong> der Spieler
                                                    erreicht hat (z.B. "3√ó" oder "5√ó")
                                                </li>
                                                <li>
                                                    Das System zeigt automatisch an:
                                                    <ul
                                                        class="list-circle list-inside ml-6 mt-1 space-y-1 text-sm"
                                                    >
                                                        <li>
                                                            Welche Meilensteine bereits erreicht
                                                            wurden ‚úì
                                                        </li>
                                                        <li>
                                                            Welche Punkte f√ºr den n√§chsten
                                                            Meilenstein vergeben werden
                                                        </li>
                                                        <li>
                                                            Die Gesamt-Anzahl an Wiederholungen des
                                                            Spielers
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li>
                                                    Ein Spieler kann
                                                    <strong
                                                        >nicht zweimal denselben Meilenstein</strong
                                                    >
                                                    bekommen ‚Äì wenn er 5√ó bereits hat, kann er nicht
                                                    nochmal 3√ó bekommen
                                                </li>
                                                <li>
                                                    Ein Spieler kann aber
                                                    <strong>mehrere Meilensteine auf einmal</strong>
                                                    √ºberspringen ‚Äì direkt von 1√ó auf 5√ó ist m√∂glich!
                                                </li>
                                            </ul>

                                            <p class="mt-3">
                                                <strong>üí° Tipp beim Erstellen:</strong> Beim
                                                Erstellen einer √úbung oder Challenge kannst du
                                                zwischen normalem Punktesystem und Meilensteinen
                                                w√§hlen. Meilensteine eignen sich besonders f√ºr:
                                            </p>
                                            <ul
                                                class="list-disc list-inside ml-6 mt-1 space-y-1 text-sm"
                                            >
                                                <li>
                                                    Endlos-√úbungen (z.B. "100 Aufschl√§ge in Folge")
                                                </li>
                                                <li>
                                                    Wiederholbare Challenges (z.B. "Topspin-Serie")
                                                </li>
                                                <li>
                                                    Langzeit-Ziele mit steigendem Schwierigkeitsgrad
                                                </li>
                                            </ul>
                                        </div>
                                    </details>

                                    <details class="group">
                                        <summary
                                            class="flex justify-between items-center cursor-pointer"
                                        >
                                            <span class="font-medium"
                                                >üîÑ Wie funktioniert der Saison-Reset?</span
                                            >
                                            <svg
                                                class="h-6 w-6 transform transition-transform group-open:rotate-180"
                                                fill="none"
                                                viewBox="0 0 24 24"
                                                stroke="currentColor"
                                            >
                                                <path
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    stroke-width="2"
                                                    d="M19 9l-7 7-7-7"
                                                />
                                            </svg>
                                        </summary>
                                        <div class="mt-2 text-gray-700">
                                            <p>
                                                Jede <strong>6 Wochen</strong> (42 Tage) wird eine
                                                neue Saison gestartet. Der Reset erfolgt
                                                <strong>automatisch um Mitternacht</strong>.
                                            </p>

                                            <p class="mt-3">
                                                <strong>Was wird zur√ºckgesetzt?</strong>
                                            </p>
                                            <ul class="list-disc list-inside mt-2 space-y-1">
                                                <li>
                                                    <strong>Saison-Punkte:</strong> Werden auf 0
                                                    zur√ºckgesetzt
                                                </li>
                                                <li>
                                                    <strong>Liga-Platzierungen:</strong> Top 2 jeder
                                                    Liga steigen auf, Bottom 2 steigen ab
                                                </li>
                                                <li>
                                                    <strong>Meilenstein-Fortschritt:</strong> Alle
                                                    Meilensteine k√∂nnen erneut erreicht werden
                                                </li>
                                                <li>
                                                    <strong>Abschluss-Status:</strong> √úbungen und
                                                    Challenges k√∂nnen erneut absolviert werden
                                                </li>
                                            </ul>

                                            <p class="mt-3">
                                                <strong>Was bleibt erhalten?</strong>
                                            </p>
                                            <ul class="list-disc list-inside mt-2 space-y-1">
                                                <li>
                                                    <strong>Einzel-Elo:</strong> Die
                                                    Einzel-Skill-Bewertung bleibt permanent
                                                </li>
                                                <li>
                                                    <strong>Doppel-Elo:</strong> Die
                                                    Doppel-Skill-Bewertung bleibt permanent
                                                </li>
                                                <li>
                                                    <strong>XP (Erfahrungspunkte):</strong> Der
                                                    Flei√ü wird nie zur√ºckgesetzt
                                                </li>
                                                <li>
                                                    <strong>Rang:</strong> Der Rang (Rekrut, Bronze,
                                                    Silber...) ist permanent
                                                </li>
                                                <li>
                                                    <strong>Grundlagen-Abschl√ºsse:</strong> Die 5
                                                    Grundlagen-√úbungen bleiben abgeschlossen
                                                </li>
                                            </ul>

                                            <p class="mt-3">
                                                <strong>üí° Tipp:</strong> Das Dashboard zeigt einen
                                                Countdown bis zum n√§chsten Saison-Reset. Das
                                                motiviert Spieler, noch schnell Punkte zu sammeln!
                                            </p>
                                        </div>
                                    </details>

                                    <details class="group">
                                        <summary
                                            class="flex justify-between items-center cursor-pointer"
                                        >
                                            <span class="font-medium"
                                                >Wie funktionieren die R√§nge und das
                                                Leaderboard?</span
                                            >
                                            <svg
                                                class="h-6 w-6 transform transition-transform group-open:rotate-180"
                                                fill="none"
                                                viewBox="0 0 24 24"
                                                stroke="currentColor"
                                            >
                                                <path
                                                    stroke-linecap="round"
                                                    stroke-linejoin="round"
                                                    stroke-width="2"
                                                    d="M19 9l-7 7-7-7"
                                                />
                                            </svg>
                                        </summary>
                                        <div class="mt-2 text-gray-700">
                                            <p>
                                                Dein Rang (z.B. Rekrut, Bronze, Silber) ist
                                                <strong>permanent</strong> und wird nie
                                                zur√ºckgesetzt. Um im Rang aufzusteigen, musst du
                                                bestimmte Meilensteine bei
                                                <strong>Elo (Skill)</strong> und
                                                <strong>XP (Flei√ü)</strong> erreichen.
                                            </p>

                                            <p class="mt-2">
                                                <strong>Die R√§nge und ihre Anforderungen:</strong>
                                            </p>
                                            <ul class="list-disc list-inside mt-2 space-y-2">
                                                <li>
                                                    <strong>ü•â Rekrut (Start):</strong> 0-49 XP,
                                                    800-849 Elo, 0 Grundlagen<br />
                                                    <em>Du startest hier mit 800 Elo und 0 XP.</em>
                                                </li>
                                                <li>
                                                    <strong>ü•â Bronze:</strong> 50+ XP, 850+ Elo, 5
                                                    Grundlagen<br />
                                                    <em
                                                        >Lerne erst die Basics, bevor du Matches
                                                        spielen darfst!</em
                                                    >
                                                </li>
                                                <li>
                                                    <strong>ü•à Silber:</strong> 200+ XP, 900+ Elo
                                                </li>
                                                <li>
                                                    <strong>ü•á Gold:</strong> 500+ XP, 1000+ Elo
                                                </li>
                                                <li>
                                                    <strong>üíé Platin:</strong> 1000+ XP, 1100+ Elo
                                                </li>
                                                <li>
                                                    <strong>üëë Champion:</strong> 1800+ XP, 1300+
                                                    Elo<br />
                                                    <em
                                                        >Die Elite ‚Äì nur die Besten schaffen es
                                                        hierher!</em
                                                    >
                                                </li>
                                            </ul>

                                            <p class="mt-2">
                                                <strong>Wichtig:</strong> Du musst immer
                                                <strong>beide</strong> Anforderungen (Elo UND XP)
                                                f√ºr den n√§chsten Rang erf√ºllen. F√ºr Bronze musst du
                                                zus√§tzlich 5 Grundlagen-√úbungen abschlie√üen.
                                            </p>

                                            <p class="mt-2">
                                                <strong
                                                    >Das Leaderboard (Ranglisten) ist in mehrere
                                                    Tabs aufgeteilt:</strong
                                                >
                                            </p>
                                            <ul class="list-disc list-inside mt-2 space-y-1">
                                                <li>
                                                    <strong>üí™ Flei√ü (XP):</strong> Zeigt die
                                                    Rangliste basierend auf Erfahrungspunkten.
                                                </li>
                                                <li>
                                                    <strong>‚≠ê Season (Punkte):</strong> Zeigt die
                                                    aktuelle Saison-Rangliste.
                                                </li>
                                                <li>
                                                    <strong>‚ö° Skill (Elo):</strong> Zeigt die
                                                    Rangliste basierend auf Einzel-Elo-Punkten.
                                                </li>
                                                <li>
                                                    <strong>üèÜ R√§nge (Level):</strong> Zeigt alle
                                                    Spieler gruppiert nach ihrem aktuellen Rang
                                                    (z.B. alle in Bronze, alle in Silber).
                                                </li>
                                                <li>
                                                    <strong>üéæ Doppel (Teams):</strong> Zeigt die
                                                    Doppel-Rangliste mit den besten
                                                    Team-Kombinationen basierend auf Doppel-Elo.
                                                </li>
                                            </ul>
                                            <p class="mt-2 text-sm italic text-gray-600">
                                                Spieler k√∂nnen im Ranglisten-Tab einstellen, welche
                                                Ranglisten sie sehen m√∂chten.
                                            </p>
                                        </div>
                                    </details>
                                </div>
                            </div>
                        </div>
                    </details>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <h2 class="text-xl font-semibold mb-4">Punkte vergeben</h2>
                            <form id="points-form" class="space-y-4">
                                <div>
                                    <label
                                        for="player-select"
                                        class="block text-sm font-medium text-gray-700"
                                        >Spieler ausw√§hlen</label
                                    >
                                    <select
                                        id="player-select"
                                        required
                                        class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                                    >
                                        <option value="">Spieler w√§hlen...</option>
                                    </select>
                                </div>
                                <div
                                    id="coach-grundlagen-info"
                                    class="hidden p-3 bg-blue-50 border border-blue-200 rounded-lg"
                                >
                                    <div class="flex items-start">
                                        <div class="flex-shrink-0">
                                            <svg
                                                class="h-5 w-5 text-blue-400"
                                                fill="currentColor"
                                                viewBox="0 0 20 20"
                                            >
                                                <path
                                                    fill-rule="evenodd"
                                                    d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                                                    clip-rule="evenodd"
                                                />
                                            </svg>
                                        </div>
                                        <div class="ml-3 flex-1">
                                            <p class="text-sm font-medium text-blue-800">
                                                üìö Grundlagen-Status
                                            </p>
                                            <p
                                                id="coach-grundlagen-text"
                                                class="mt-1 text-sm text-blue-700"
                                            ></p>
                                            <div class="mt-2 w-full bg-blue-200 rounded-full h-2">
                                                <div
                                                    id="coach-grundlagen-bar"
                                                    class="bg-blue-600 h-2 rounded-full transition-all"
                                                    style="width: 0%"
                                                ></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label
                                        for="reason-select"
                                        class="block text-sm font-medium text-gray-700"
                                        >Grund</label
                                    >
                                    <select
                                        id="reason-select"
                                        required
                                        class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                                    >
                                        <option value="">Grund w√§hlen...</option>
                                        <option value="exercise">√úbung abgeschlossen</option>
                                        <option value="challenge">Challenge gemeistert</option>
                                        <option value="penalty">‚ö†Ô∏è Strafe vergeben</option>
                                        <option value="manual">Manuelle Vergabe</option>
                                    </select>
                                </div>
                                <div id="exercise-select-container" class="hidden">
                                    <label
                                        for="exercise-select"
                                        class="block text-sm font-medium text-gray-700"
                                        >√úbung ausw√§hlen</label
                                    >
                                    <select
                                        id="exercise-select"
                                        class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                                    ></select>
                                </div>
                                <div id="challenge-select-container" class="hidden">
                                    <label
                                        for="challenge-select"
                                        class="block text-sm font-medium text-gray-700"
                                        >Challenge ausw√§hlen</label
                                    >
                                    <select
                                        id="challenge-select"
                                        class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                                    ></select>
                                </div>
                                <!-- Milestone Selector (shown when exercise/challenge has milestones) -->
                                <div
                                    id="milestone-select-container"
                                    class="hidden bg-indigo-50 border border-indigo-200 rounded-lg p-4"
                                >
                                    <label
                                        for="milestone-select"
                                        class="block text-sm font-medium text-indigo-900 mb-2"
                                        >üéØ Welcher Meilenstein wurde erreicht?</label
                                    >
                                    <select
                                        id="milestone-select"
                                        class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-indigo-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md bg-white"
                                    >
                                        <option value="">Meilenstein w√§hlen...</option>
                                    </select>
                                    <div
                                        id="milestone-info"
                                        class="mt-3 text-xs text-indigo-700 bg-white p-2 rounded"
                                    >
                                        <div class="flex justify-between">
                                            <span
                                                ><strong>Fortschritt:</strong>
                                                <span id="milestone-progress-text">-</span></span
                                            >
                                            <span
                                                ><strong>Punkte:</strong>
                                                <span
                                                    id="milestone-points-text"
                                                    class="font-bold text-indigo-600"
                                                    >0 P.</span
                                                ></span
                                            >
                                        </div>
                                    </div>
                                </div>
                                <!-- Partner Selection (shown when exercise/challenge has partner system enabled) -->
                                <div
                                    id="partner-select-container"
                                    class="hidden bg-green-50 border border-green-200 rounded-lg p-4"
                                >
                                    <label
                                        for="partner-select"
                                        class="block text-sm font-medium text-green-900 mb-2"
                                        >üë• Trainingspartner ausw√§hlen (optional)</label
                                    >
                                    <select
                                        id="partner-select"
                                        class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-green-300 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm rounded-md bg-white"
                                    >
                                        <option value="">
                                            Kein Partner (Spieler trainiert alleine oder mit
                                            Trainer)
                                        </option>
                                    </select>
                                    <div
                                        id="partner-info"
                                        class="mt-3 text-xs text-green-700 bg-white p-3 rounded border border-green-200"
                                    >
                                        <div class="space-y-2">
                                            <div class="flex items-start gap-2">
                                                <span class="text-base">üí™</span>
                                                <div class="flex-1">
                                                    <strong>Aktiver Spieler:</strong>
                                                    <span
                                                        id="active-player-name"
                                                        class="font-semibold"
                                                        >-</span
                                                    >
                                                    <div class="text-green-600 font-medium">
                                                        Erh√§lt 100% der Punkte & XP +
                                                        Meilenstein-Fortschritt
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="flex items-start gap-2">
                                                <span class="text-base">ü§ù</span>
                                                <div class="flex-1">
                                                    <strong>Passiver Spieler (Partner):</strong>
                                                    <span
                                                        id="passive-player-name"
                                                        class="font-semibold"
                                                        >-</span
                                                    >
                                                    <div
                                                        id="partner-reward-info"
                                                        class="text-green-600 font-medium"
                                                    >
                                                        Erh√§lt
                                                        <span id="partner-percentage">50</span>% der
                                                        Punkte & XP
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Completion Status (shown when exercise/challenge without milestones is selected) -->
                                <div
                                    id="completion-status-container"
                                    class="hidden bg-blue-50 border border-blue-200 rounded-lg p-4"
                                >
                                    <div class="text-sm text-blue-900">
                                        <div id="completion-status-text" class="space-y-2">
                                            <!-- Will be populated dynamically -->
                                        </div>
                                    </div>
                                </div>
                                <div id="penalty-container" class="hidden space-y-4">
                                    <div class="bg-red-50 border-l-4 border-red-400 p-4 mb-4">
                                        <div class="flex">
                                            <div class="flex-shrink-0">
                                                <svg
                                                    class="h-5 w-5 text-red-400"
                                                    viewBox="0 0 20 20"
                                                    fill="currentColor"
                                                >
                                                    <path
                                                        fill-rule="evenodd"
                                                        d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                                                        clip-rule="evenodd"
                                                    />
                                                </svg>
                                            </div>
                                            <div class="ml-3">
                                                <p class="text-sm text-red-700">
                                                    Strafen ziehen sowohl Saison-Punkte als auch XP
                                                    ab!
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <label
                                            for="penalty-severity"
                                            class="block text-sm font-medium text-gray-700"
                                            >Schweregrad</label
                                        >
                                        <select
                                            id="penalty-severity"
                                            class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm rounded-md"
                                        >
                                            <option value="light">
                                                ‚ö†Ô∏è Leicht (-10 Saison-Pkt, -5 XP)
                                            </option>
                                            <option value="medium">
                                                ‚ö†Ô∏è‚ö†Ô∏è Mittel (-20 Saison-Pkt, -10 XP)
                                            </option>
                                            <option value="severe">
                                                ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è Schwer (-30 Saison-Pkt, -20 XP)
                                            </option>
                                        </select>
                                    </div>
                                    <div>
                                        <label
                                            for="penalty-reason"
                                            class="block text-sm font-medium text-gray-700"
                                            >Grund der Strafe</label
                                        >
                                        <textarea
                                            id="penalty-reason"
                                            rows="3"
                                            required
                                            placeholder="z.B. Unsportliches Verhalten, Schl√§ger geworfen"
                                            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500"
                                        ></textarea>
                                    </div>
                                </div>
                                <div id="manual-points-container" class="hidden space-y-4">
                                    <div>
                                        <label
                                            for="manual-points"
                                            class="block text-sm font-medium text-gray-700"
                                            >Anzahl Punkte</label
                                        >
                                        <input
                                            type="number"
                                            id="manual-points"
                                            placeholder="z.B. 10 oder -5"
                                            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                        />
                                    </div>
                                    <div>
                                        <label
                                            for="manual-reason"
                                            class="block text-sm font-medium text-gray-700"
                                            >Begr√ºndung</label
                                        >
                                        <input
                                            type="text"
                                            id="manual-reason"
                                            placeholder="z.B. Faires Spiel"
                                            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                        />
                                    </div>
                                    <div>
                                        <label
                                            for="manual-xp"
                                            class="block text-sm font-medium text-gray-700"
                                            >XP-√Ñnderung (optional)</label
                                        >
                                        <input
                                            type="number"
                                            id="manual-xp"
                                            placeholder="Leer lassen = gleich wie Punkte"
                                            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                        />
                                        <p class="mt-1 text-xs text-gray-500">
                                            Wenn leer, wird XP = Punkte gesetzt
                                        </p>
                                    </div>

                                    <!-- Manual Partner Selection -->
                                    <div class="border-t pt-3">
                                        <div class="flex items-center mb-2">
                                            <input
                                                type="checkbox"
                                                id="manual-partner-toggle"
                                                class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
                                            />
                                            <label
                                                for="manual-partner-toggle"
                                                class="ml-2 text-sm font-medium text-gray-700"
                                            >
                                                üë• Mit Trainingspartner
                                            </label>
                                        </div>
                                        <div id="manual-partner-container" class="hidden">
                                            <label
                                                for="manual-partner-select"
                                                class="block text-sm font-medium text-gray-700 mb-1"
                                                >Trainingspartner (optional)</label
                                            >
                                            <select
                                                id="manual-partner-select"
                                                class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md bg-white mb-2"
                                            >
                                                <option value="">Kein Partner</option>
                                            </select>
                                            <label
                                                for="manual-partner-percentage"
                                                class="block text-sm font-medium text-gray-700 mb-1"
                                                >Prozentsatz f√ºr Partner</label
                                            >
                                            <div class="flex items-center gap-2">
                                                <input
                                                    type="number"
                                                    id="manual-partner-percentage"
                                                    min="0"
                                                    max="100"
                                                    value="50"
                                                    class="w-20 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                                />
                                                <span class="text-sm text-gray-600"
                                                    >% der Punkte & XP</span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <button
                                    type="submit"
                                    class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg"
                                >
                                    Punkte speichern
                                </button>
                                <p
                                    id="points-feedback"
                                    class="mt-3 text-sm font-medium text-center"
                                ></p>
                            </form>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <h2 class="text-xl font-semibold mb-4">Punkte-Historie</h2>
                            <div>
                                <label
                                    for="history-player-filter"
                                    class="block text-sm font-medium text-gray-700"
                                    >Spieler filtern</label
                                >
                                <select
                                    id="history-player-filter"
                                    class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                                >
                                    <option value="">Bitte Spieler w√§hlen...</option>
                                </select>
                            </div>
                            <ul
                                id="coach-points-history-list"
                                class="mt-4 space-y-3 max-h-96 overflow-y-auto"
                            >
                                <li class="text-center text-gray-500 py-4">
                                    Bitte einen Spieler ausw√§hlen, um die Historie anzuzeigen.
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div id="tab-content-challenges" class="tab-content hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-1 bg-white p-6 rounded-xl shadow-md">
                            <h2 class="text-xl font-semibold mb-4">Neue Challenge erstellen</h2>
                            <form id="create-challenge-form" class="space-y-4">
                                <div>
                                    <label
                                        for="challenge-title"
                                        class="block text-sm font-medium text-gray-700"
                                        >Titel</label
                                    >
                                    <input
                                        type="text"
                                        id="challenge-title"
                                        required
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                    />
                                </div>
                                <div>
                                    <label
                                        for="challenge-type"
                                        class="block text-sm font-medium text-gray-700"
                                        >Typ (Dauer)</label
                                    >
                                    <select
                                        id="challenge-type"
                                        required
                                        class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                                    >
                                        <option value="daily">T√§glich</option>
                                        <option value="weekly">W√∂chentlich</option>
                                        <option value="monthly">Monatlich</option>
                                    </select>
                                </div>
                                <div>
                                    <label
                                        for="challenge-description"
                                        class="block text-sm font-medium text-gray-700"
                                        >Beschreibung</label
                                    >
                                    <textarea
                                        id="challenge-description"
                                        rows="3"
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                    ></textarea>
                                </div>
                                <!-- Points System Toggle -->
                                <div class="border-t border-gray-200 pt-4">
                                    <label class="flex items-center cursor-pointer">
                                        <input
                                            type="checkbox"
                                            id="challenge-milestones-enabled"
                                            class="w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"
                                        />
                                        <span class="ml-2 text-sm font-medium text-gray-700"
                                            >‚ú® Abgestufte Punktevergabe (Meilensteine)</span
                                        >
                                    </label>
                                    <p class="text-xs text-gray-500 mt-1 ml-6">
                                        Z.B. 1√ó erreicht = 3 Punkte, 3√ó erreicht = +5 Punkte
                                        zus√§tzlich
                                    </p>
                                </div>

                                <!-- Standard Points -->
                                <div id="challenge-standard-points-container">
                                    <label
                                        for="challenge-points"
                                        class="block text-sm font-medium text-gray-700"
                                        >Punkte</label
                                    >
                                    <input
                                        type="number"
                                        id="challenge-points"
                                        required
                                        min="1"
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                    />
                                    <p
                                        id="challenge-points-hint"
                                        class="mt-1 text-xs text-gray-600"
                                    >
                                        üí° <strong>Empfehlung:</strong>
                                        <span id="challenge-points-range">8-20 Punkte</span> f√ºr
                                        <span id="challenge-duration-text">t√§gliche</span>
                                        Challenges
                                    </p>
                                </div>

                                <!-- Milestone Points -->
                                <div id="challenge-milestones-container" class="hidden space-y-3">
                                    <label class="block text-sm font-medium text-gray-700"
                                        >Meilensteine definieren</label
                                    >
                                    <div id="challenge-milestones-list" class="space-y-2">
                                        <!-- Milestone entries will be added here dynamically -->
                                    </div>
                                    <button
                                        type="button"
                                        id="add-challenge-milestone-btn"
                                        class="text-sm text-indigo-600 hover:text-indigo-800 font-medium"
                                    >
                                        + Meilenstein hinzuf√ºgen
                                    </button>
                                    <div class="text-xs text-gray-600 bg-gray-50 p-2 rounded">
                                        <strong>Max. erreichbare Punkte:</strong>
                                        <span
                                            id="challenge-total-milestone-points"
                                            class="font-bold text-indigo-600"
                                            >0</span
                                        >
                                        P.
                                    </div>
                                </div>
                                <div>
                                    <label
                                        for="challenge-subgroup"
                                        class="block text-sm font-medium text-gray-700"
                                        >Untergruppe</label
                                    >
                                    <select
                                        id="challenge-subgroup"
                                        required
                                        class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                                    >
                                        <option value="all">Alle (Gesamtverein)</option>
                                        <!-- Subgroups will be loaded dynamically -->
                                    </select>
                                </div>
                                <div class="flex items-center">
                                    <input
                                        type="checkbox"
                                        id="challenge-repeatable"
                                        class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
                                    />
                                    <label
                                        for="challenge-repeatable"
                                        class="ml-2 block text-sm text-gray-700"
                                    >
                                        Mehrfach einl√∂sbar
                                        <span class="text-gray-500"
                                            >(z.B. f√ºr "Besiegter Spieler")</span
                                        >
                                    </label>
                                </div>

                                <!-- Partner System -->
                                <div class="border-t pt-4">
                                    <div class="flex items-center mb-3">
                                        <input
                                            type="checkbox"
                                            id="challenge-partner-system-toggle-coach"
                                            class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
                                        />
                                        <label
                                            for="challenge-partner-system-toggle-coach"
                                            class="ml-2 text-sm font-medium text-gray-700"
                                        >
                                            üë• Partner-System aktivieren (Challenge mit
                                            Trainingspartner)
                                        </label>
                                    </div>
                                    <div
                                        id="challenge-partner-container-coach"
                                        class="hidden space-y-3 bg-green-50 p-4 rounded-lg"
                                    >
                                        <p class="text-xs text-green-700 mb-3">
                                            <strong>Partner-System:</strong> Bei dieser Challenge
                                            trainieren zwei Spieler zusammen. Der passive Spieler
                                            (z.B. Zuspieler/Blocker) erh√§lt einen Prozentsatz der
                                            Punkte des aktiven Spielers.
                                        </p>
                                        <div>
                                            <label
                                                for="challenge-partner-percentage-coach"
                                                class="block text-sm font-medium text-gray-700"
                                            >
                                                Prozentsatz f√ºr passiven Spieler
                                            </label>
                                            <div class="flex items-center gap-3 mt-2">
                                                <input
                                                    type="number"
                                                    id="challenge-partner-percentage-coach"
                                                    min="0"
                                                    max="100"
                                                    value="50"
                                                    class="w-24 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"
                                                />
                                                <span class="text-sm text-gray-600"
                                                    >% der Punkte & XP</span
                                                >
                                            </div>
                                            <p class="text-xs text-gray-500 mt-1">
                                                Standard: 50% (Zuspieler/Blocker). Bei 100% erhalten
                                                beide Spieler die gleichen Punkte.
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <button
                                    type="submit"
                                    class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg"
                                >
                                    Challenge erstellen
                                </button>
                                <p
                                    id="challenge-feedback"
                                    class="mt-3 text-sm font-medium text-center"
                                ></p>
                            </form>
                        </div>
                        <div class="lg:col-span-2 space-y-6">
                            <div class="bg-white p-6 rounded-xl shadow-md">
                                <h2 class="text-xl font-semibold mb-4">
                                    Aktive Challenges im Verein
                                </h2>
                                <div id="active-challenges-list" class="space-y-4">
                                    <p class="text-gray-500">Aktive Challenges werden geladen...</p>
                                </div>
                            </div>

                            <div class="bg-white p-6 rounded-xl shadow-md">
                                <h2 class="text-xl font-semibold mb-4">Abgelaufene Challenges</h2>
                                <div id="expired-challenges-list" class="space-y-4">
                                    <p class="text-gray-500">
                                        Abgelaufene Challenges werden geladen...
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tab-content-exercises" class="tab-content hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-1 bg-white p-6 rounded-xl shadow-md">
                            <h2 class="text-xl font-semibold mb-4">Neue √úbung erstellen</h2>
                            <form id="create-exercise-form" class="space-y-4">
                                <div>
                                    <label
                                        for="exercise-title-form"
                                        class="block text-sm font-medium text-gray-700"
                                        >Titel</label
                                    >
                                    <input
                                        type="text"
                                        id="exercise-title-form"
                                        required
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                    />
                                </div>
                                <div>
                                    <label
                                        for="exercise-description-form"
                                        class="block text-sm font-medium text-gray-700"
                                        >Beschreibung</label
                                    >
                                    <div id="description-toggle-container-coach"></div>
                                    <textarea
                                        id="exercise-description-form"
                                        rows="3"
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                    ></textarea>
                                    <div id="description-table-editor-coach" class="mt-2"></div>
                                </div>
                                <div>
                                    <label
                                        for="exercise-level-form"
                                        class="block text-sm font-medium text-gray-700"
                                        >Level</label
                                    >
                                    <select
                                        id="exercise-level-form"
                                        required
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                    >
                                        <option value="">Level w√§hlen...</option>
                                        <option value="grundlagen">üéñÔ∏è Grundlagen (Rekruten)</option>
                                        <option value="standard">ü•â Standard (ab Bronze)</option>
                                        <option value="fortgeschritten">
                                            ü•á Fortgeschritten (ab Gold)
                                        </option>
                                    </select>
                                </div>
                                <div>
                                    <label
                                        for="exercise-difficulty-form"
                                        class="block text-sm font-medium text-gray-700"
                                        >Schwierigkeit</label
                                    >
                                    <select
                                        id="exercise-difficulty-form"
                                        required
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                    >
                                        <option value="">Schwierigkeit w√§hlen...</option>
                                        <option value="easy">‚≠ê Einfach</option>
                                        <option value="normal">‚≠ê‚≠ê Normal</option>
                                        <option value="hard">‚≠ê‚≠ê‚≠ê Schwer</option>
                                    </select>
                                </div>
                                <!-- Points System Toggle -->
                                <div class="border-t border-gray-200 pt-4">
                                    <label class="flex items-center cursor-pointer">
                                        <input
                                            type="checkbox"
                                            id="exercise-milestones-enabled"
                                            class="w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"
                                        />
                                        <span class="ml-2 text-sm font-medium text-gray-700"
                                            >‚ú® Abgestufte Punktevergabe (Meilensteine)</span
                                        >
                                    </label>
                                    <p class="text-xs text-gray-500 mt-1 ml-6">
                                        Z.B. 1√ó geschafft = 3 Punkte, 3√ó geschafft = +5 Punkte
                                        zus√§tzlich
                                    </p>
                                </div>

                                <!-- Standard Points (Auto-calculated) -->
                                <div id="exercise-standard-points-container">
                                    <label
                                        for="exercise-points-form"
                                        class="block text-sm font-medium text-gray-700"
                                        >Punkte (automatisch berechnet)</label
                                    >
                                    <input
                                        type="number"
                                        id="exercise-points-form"
                                        readonly
                                        min="1"
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-50 text-gray-700 font-semibold cursor-not-allowed"
                                    />
                                    <p class="text-xs text-gray-500 mt-1">
                                        Wird automatisch basierend auf Level + Schwierigkeit
                                        berechnet
                                    </p>
                                </div>

                                <!-- Milestone Points -->
                                <div id="exercise-milestones-container" class="hidden space-y-3">
                                    <label class="block text-sm font-medium text-gray-700"
                                        >Meilensteine definieren</label
                                    >
                                    <div id="exercise-milestones-list" class="space-y-2">
                                        <!-- Milestone entries will be added here dynamically -->
                                    </div>
                                    <button
                                        type="button"
                                        id="add-exercise-milestone-btn"
                                        class="text-sm text-indigo-600 hover:text-indigo-800 font-medium"
                                    >
                                        + Meilenstein hinzuf√ºgen
                                    </button>
                                    <div class="text-xs text-gray-600 bg-gray-50 p-2 rounded">
                                        <strong>Max. erreichbare Punkte:</strong>
                                        <span
                                            id="exercise-total-milestone-points"
                                            class="font-bold text-indigo-600"
                                            >0</span
                                        >
                                        P.
                                    </div>
                                </div>
                                <div>
                                    <label
                                        for="exercise-tags-form"
                                        class="block text-sm font-medium text-gray-700"
                                        >Tags (kommagetrennt)</label
                                    >
                                    <input
                                        type="text"
                                        id="exercise-tags-form"
                                        placeholder="z.B. Aufschlag, Beinarbeit, Koordination"
                                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                    />
                                    <p class="text-xs text-gray-500 mt-1">
                                        üí° Tipp: Verwende "Grundlage" als Tag f√ºr Grundlagen-√úbungen
                                    </p>
                                </div>

                                <div>
                                    <label
                                        for="exercise-image-form"
                                        class="block text-sm font-medium text-gray-700"
                                        >Bild (optional)</label
                                    >
                                    <input
                                        type="file"
                                        id="exercise-image-form"
                                        accept="image/*"
                                        class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"
                                    />
                                </div>
                                <button
                                    type="submit"
                                    id="create-exercise-submit"
                                    class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg shadow-md"
                                >
                                    √úbung speichern
                                </button>
                            </form>
                            <p
                                id="exercise-feedback"
                                class="mt-3 text-sm font-medium text-center"
                            ></p>
                        </div>
                        <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-md">
                            <h2 class="text-xl font-semibold mb-4">Globaler √úbungskatalog</h2>
                            <!-- Tag Filter Section (Collapsible) -->
                            <div class="mb-4">
                                <button
                                    id="toggle-tags-filter-coach"
                                    class="flex items-center gap-2 text-indigo-600 hover:text-indigo-800 font-semibold text-sm mb-2"
                                >
                                    <svg
                                        id="filter-icon-coach"
                                        class="w-4 h-4 transform transition-transform"
                                        fill="none"
                                        stroke="currentColor"
                                        viewBox="0 0 24 24"
                                    >
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            stroke-width="2"
                                            d="M19 9l-7 7-7-7"
                                        ></path>
                                    </svg>
                                    üè∑Ô∏è Tags filtern
                                </button>
                                <div
                                    id="tags-filter-section-coach"
                                    class="hidden border border-gray-200 rounded-lg p-3 bg-gray-50"
                                >
                                    <input
                                        type="text"
                                        id="tag-search-coach"
                                        placeholder="Tag suchen..."
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm mb-3 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                    />
                                    <div
                                        id="tags-filter-container-coach"
                                        class="flex flex-wrap gap-2 max-h-32 overflow-y-auto"
                                    >
                                        <!-- Tag buttons will be dynamically inserted here -->
                                    </div>
                                </div>
                            </div>
                            <div
                                id="exercises-list-coach"
                                class="grid grid-cols-1 sm:grid-cols-2 gap-6 max-h-[70vh] overflow-y-auto"
                            >
                                <p>√úbungen werden geladen...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tab-content-statistics" class="tab-content hidden">
                    <div class="space-y-8">
                        <!-- Season Countdown -->
                        <div
                            class="bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-300 p-4 rounded-xl shadow-md"
                        >
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="bg-yellow-400 p-3 rounded-full">
                                        <svg
                                            class="w-6 h-6 text-yellow-900"
                                            fill="none"
                                            stroke="currentColor"
                                            viewBox="0 0 24 24"
                                        >
                                            <path
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                stroke-width="2"
                                                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                                            ></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="text-sm font-semibold text-yellow-900">
                                            ‚è≥ Saison-Ende
                                        </h3>
                                        <p class="text-xs text-yellow-700">
                                            Saison-Punkte werden am Ende der Saison zur√ºckgesetzt
                                        </p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p
                                        id="season-countdown-coach"
                                        class="text-2xl font-bold text-yellow-900"
                                    >
                                        L√§dt...
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Club Join/Leave Requests Section -->
                        <div class="space-y-6">
                            <!-- Beitrittsanfragen -->
                            <div class="bg-white rounded-lg shadow-md p-6">
                                <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-user-plus text-indigo-600 mr-2"></i>
                                    Ausstehende Beitrittsanfragen
                                </h3>
                                <div id="club-join-requests-list">
                                    <!-- Wird dynamisch von club-requests-manager.js gef√ºllt -->
                                    <p class="text-gray-500 text-sm text-center py-4">Lade Anfragen...</p>
                                </div>
                            </div>

                            <!-- Austrittsanfragen -->
                            <div class="bg-white rounded-lg shadow-md p-6">
                                <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-sign-out-alt text-orange-600 mr-2"></i>
                                    Ausstehende Austrittsanfragen
                                </h3>
                                <div id="leave-requests-list">
                                    <!-- Wird dynamisch von club-requests-manager.js gef√ºllt -->
                                    <p class="text-gray-500 text-sm text-center py-4">Lade Anfragen...</p>
                                </div>
                            </div>
                        </div>

                        <!-- Pending Match Requests Section (Singles + Doubles) -->
                        <div
                            class="bg-gradient-to-r from-orange-50 to-yellow-50 border-2 border-orange-200 p-6 rounded-xl shadow-md"
                        >
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-xl font-semibold text-orange-800">
                                    <i class="fas fa-clock mr-2"></i> Ausstehende Anfragen
                                </h2>
                                <span
                                    id="coach-match-request-badge"
                                    class="hidden bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full"
                                    >0</span
                                >
                            </div>
                            <p class="text-sm text-orange-700 mb-4">
                                Diese Matches wurden von Spielern gemeldet und warten auf deine
                                Genehmigung.
                            </p>
                            <div id="coach-pending-requests-list" class="space-y-4">
                                <p class="text-gray-500 text-center py-4">
                                    Keine ausstehenden Anfragen
                                </p>
                            </div>
                        </div>

                        <!-- Processed Match Requests Section -->
                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <h2 class="text-xl font-semibold text-gray-800 mb-4">
                                <i class="fas fa-history mr-2"></i> Eingegangene Anfragen
                            </h2>
                            <p class="text-sm text-gray-600 mb-4">
                                Anfragen, die du bereits genehmigt oder abgelehnt hast.
                            </p>
                            <div id="coach-processed-requests-list" class="space-y-4">
                                <p class="text-gray-500 text-center py-4">
                                    Keine bearbeiteten Anfragen
                                </p>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <h2 class="text-2xl font-bold mb-6 flex items-center">
                                <span class="mr-3">üìà</span> Trainings-Analyse
                            </h2>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                                <div class="bg-indigo-50 p-4 rounded-lg text-center">
                                    <p class="text-sm text-gray-600 mb-1">Diese Woche</p>
                                    <p
                                        id="stats-attendance-week"
                                        class="text-3xl font-bold text-indigo-600"
                                    >
                                        -
                                    </p>
                                    <p class="text-xs text-gray-500 mt-1">√ò Teilnehmer</p>
                                </div>
                                <div class="bg-blue-50 p-4 rounded-lg text-center">
                                    <p class="text-sm text-gray-600 mb-1">Dieser Monat</p>
                                    <p
                                        id="stats-attendance-month"
                                        class="text-3xl font-bold text-blue-600"
                                    >
                                        -
                                    </p>
                                    <p class="text-xs text-gray-500 mt-1">√ò Teilnehmer</p>
                                </div>
                                <div class="bg-purple-50 p-4 rounded-lg text-center">
                                    <p class="text-sm text-gray-600 mb-1">Gesamt Trainingstage</p>
                                    <p
                                        id="stats-total-trainings"
                                        class="text-3xl font-bold text-purple-600"
                                    >
                                        -
                                    </p>
                                    <p class="text-xs text-gray-500 mt-1">Diese Saison</p>
                                </div>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Trend (Letzte 12 Wochen)</h3>
                                <canvas id="attendance-trend-chart" height="80"></canvas>
                            </div>
                        </div>

                        <!-- Competition Activity Statistics -->
                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <h2 class="text-2xl font-bold mb-6 flex items-center">
                                <span class="mr-3">üèì</span> Wettkampf-Aktivit√§t
                            </h2>
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                                <div class="bg-emerald-50 p-4 rounded-lg text-center">
                                    <p id="stats-competition-total-label" class="text-sm text-gray-600 mb-1">
                                        Gesamt (12 Monate)
                                    </p>
                                    <p
                                        id="stats-competition-total"
                                        class="text-3xl font-bold text-emerald-600"
                                    >
                                        -
                                    </p>
                                    <p class="text-xs text-gray-500 mt-1">Wettk√§mpfe</p>
                                </div>
                                <div class="bg-sky-50 p-4 rounded-lg text-center">
                                    <p id="stats-competition-avg-label" class="text-sm text-gray-600 mb-1">
                                        √ò pro Monat
                                    </p>
                                    <p
                                        id="stats-competition-avg"
                                        class="text-3xl font-bold text-sky-600"
                                    >
                                        -
                                    </p>
                                    <p class="text-xs text-gray-500 mt-1">Wettk√§mpfe</p>
                                </div>
                                <div class="bg-violet-50 p-4 rounded-lg text-center">
                                    <p
                                        id="stats-competition-active-period-label"
                                        class="text-sm text-gray-600 mb-1"
                                    >
                                        Aktivster Monat
                                    </p>
                                    <p
                                        id="stats-competition-active-period"
                                        class="text-3xl font-bold text-violet-600"
                                    >
                                        -
                                    </p>
                                    <p class="text-xs text-gray-500 mt-1">Zeitraum (Anzahl)</p>
                                </div>
                                <div class="bg-amber-50 p-4 rounded-lg text-center">
                                    <p class="text-sm text-gray-600 mb-1">Trend</p>
                                    <p
                                        id="stats-competition-trend"
                                        class="text-3xl font-bold text-amber-600"
                                    >
                                        -
                                    </p>
                                    <p class="text-xs text-gray-500 mt-1">Ver√§nderung</p>
                                </div>
                            </div>

                            <!-- Period Filter Buttons -->
                            <div class="mb-3">
                                <p class="text-sm font-semibold text-gray-700 mb-2 text-center">
                                    Zeitraum:
                                </p>
                                <div class="flex flex-wrap gap-2 justify-center">
                                    <button
                                        id="competition-period-week"
                                        class="px-4 py-2 rounded-lg font-medium transition-colors bg-gray-200 text-gray-700"
                                    >
                                        üìÖ Woche
                                    </button>
                                    <button
                                        id="competition-period-month"
                                        class="px-4 py-2 rounded-lg font-medium transition-colors bg-blue-600 text-white"
                                    >
                                        üìÜ Monat
                                    </button>
                                    <button
                                        id="competition-period-year"
                                        class="px-4 py-2 rounded-lg font-medium transition-colors bg-gray-200 text-gray-700"
                                    >
                                        üìä Jahr
                                    </button>
                                </div>
                            </div>

                            <!-- Type Filter Buttons -->
                            <div class="mb-4">
                                <p class="text-sm font-semibold text-gray-700 mb-2 text-center">
                                    Ansicht:
                                </p>
                                <div class="flex flex-wrap gap-2 justify-center">
                                <button
                                    id="competition-filter-all"
                                    class="px-4 py-2 rounded-lg font-medium transition-colors bg-indigo-600 text-white"
                                >
                                    Alle (Einzel + Doppel)
                                </button>
                                <button
                                    id="competition-filter-coach"
                                    class="px-4 py-2 rounded-lg font-medium transition-colors bg-gray-200 text-gray-700"
                                >
                                    Nur von Trainern
                                </button>
                                <button
                                    id="competition-filter-player"
                                    class="px-4 py-2 rounded-lg font-medium transition-colors bg-gray-200 text-gray-700"
                                >
                                    Nur von Spielern
                                </button>
                                    <button
                                        id="competition-filter-comparison"
                                        class="px-4 py-2 rounded-lg font-medium transition-colors bg-gray-200 text-gray-700"
                                    >
                                        Trainer vs. Spieler
                                    </button>
                                </div>
                            </div>

                            <!-- Chart -->
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <h3 class="text-lg font-semibold mb-4">Aktivit√§ts-√úbersicht</h3>
                                <canvas id="competition-activity-chart" height="80"></canvas>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <h2 class="text-2xl font-bold mb-6 flex items-center">
                                <span class="mr-3">üë•</span> Team-√úbersicht
                            </h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                                <div class="bg-green-50 p-4 rounded-lg text-center">
                                    <p class="text-sm text-gray-600 mb-1">Team-Gr√∂√üe</p>
                                    <p
                                        id="stats-team-size"
                                        class="text-3xl font-bold text-green-600"
                                    >
                                        -
                                    </p>
                                </div>
                                <div class="bg-yellow-50 p-4 rounded-lg text-center">
                                    <p class="text-sm text-gray-600 mb-1">√ò Alter</p>
                                    <p
                                        id="stats-avg-age"
                                        class="text-3xl font-bold text-yellow-600"
                                    >
                                        -
                                    </p>
                                </div>
                                <div class="bg-pink-50 p-4 rounded-lg text-center">
                                    <p class="text-sm text-gray-600 mb-1">√ò Elo</p>
                                    <p id="stats-avg-elo" class="text-3xl font-bold text-pink-600">
                                        -
                                    </p>
                                </div>
                                <div class="bg-cyan-50 p-4 rounded-lg text-center">
                                    <p class="text-sm text-gray-600 mb-1">√ò XP</p>
                                    <p id="stats-avg-xp" class="text-3xl font-bold text-cyan-600">
                                        -
                                    </p>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <h3 class="text-lg font-semibold mb-4 text-center">
                                        Altersverteilung
                                    </h3>
                                    <canvas id="age-distribution-chart"></canvas>
                                </div>
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <h3 class="text-lg font-semibold mb-4 text-center">
                                        Geschlechterverteilung
                                    </h3>
                                    <canvas id="gender-distribution-chart"></canvas>
                                </div>
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <h3 class="text-lg font-semibold mb-4 text-center">
                                        Level-Verteilung
                                    </h3>
                                    <canvas id="rank-distribution-chart"></canvas>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-xl shadow-md">
                            <h2 class="text-2xl font-bold mb-6 flex items-center">
                                <span class="mr-3">üî•</span> Aktivit√§ts-Monitor
                            </h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="bg-orange-50 p-4 rounded-lg">
                                    <h3 class="text-lg font-semibold mb-3 flex items-center">
                                        üèÜ Top Streak
                                    </h3>
                                    <ul id="stats-top-streaks" class="space-y-2">
                                        <li class="text-gray-500">Lade Daten...</li>
                                    </ul>
                                </div>
                                <div class="bg-red-50 p-4 rounded-lg">
                                    <h3 class="text-lg font-semibold mb-3 flex items-center">
                                        ‚ö†Ô∏è Gef√§hrdete Spieler
                                    </h3>
                                    <p class="text-xs text-gray-500 mb-3">
                                        Nicht beim Training seit &gt;2 Wochen
                                    </p>
                                    <ul id="stats-inactive-players" class="space-y-2">
                                        <li class="text-gray-500">Lade Daten...</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                                <div class="bg-gray-50 p-4 rounded-lg text-center">
                                    <p class="text-sm text-gray-600 mb-1">Matches/Woche</p>
                                    <p
                                        id="stats-matches-per-week"
                                        class="text-3xl font-bold text-gray-700"
                                    >
                                        -
                                    </p>
                                </div>
                                <div class="bg-gray-50 p-4 rounded-lg text-center">
                                    <p class="text-sm text-gray-600 mb-1">Grundlagen-Quote</p>
                                    <p
                                        id="stats-grundlagen-rate"
                                        class="text-3xl font-bold text-gray-700"
                                    >
                                        -
                                    </p>
                                </div>
                                <div class="bg-gray-50 p-4 rounded-lg text-center">
                                    <p class="text-sm text-gray-600 mb-1">Team-Fortschritt</p>
                                    <p
                                        id="stats-team-progress"
                                        class="text-3xl font-bold text-gray-700"
                                    >
                                        -
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tab-content-subgroups" class="tab-content hidden">
                    <div class="max-w-6xl mx-auto">
                        <div class="mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <h2 class="text-lg font-semibold text-blue-900 mb-2">
                                üìö Was sind Untergruppen?
                            </h2>
                            <p class="text-sm text-blue-800">
                                Untergruppen erm√∂glichen es dir, mehrere Trainingsgruppen innerhalb
                                deines Vereins zu verwalten (z.B. "U10", "U13", "Leistungsteam").
                                Jede Gruppe hat separate Anwesenheitslisten und Streaks, w√§hrend
                                Elo, XP und R√§nge f√ºr alle Spieler global bleiben.
                            </p>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <div class="lg:col-span-1 bg-white p-6 rounded-xl shadow-md">
                                <h2 class="text-xl font-semibold mb-4">
                                    Neue Untergruppe erstellen
                                </h2>
                                <form id="create-subgroup-form" class="space-y-4">
                                    <div>
                                        <label
                                            for="subgroup-name"
                                            class="block text-sm font-medium text-gray-700"
                                            >Gruppenname</label
                                        >
                                        <input
                                            type="text"
                                            id="subgroup-name"
                                            required
                                            placeholder="z.B. U10, Leistungsteam"
                                            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                                        />
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2"
                                            >Farbe f√ºr Kalender</label
                                        >
                                        <div class="flex gap-2 flex-wrap">
                                            <label class="inline-flex items-center cursor-pointer">
                                                <input
                                                    type="radio"
                                                    name="subgroup-color"
                                                    value="#6366f1"
                                                    class="sr-only peer"
                                                    checked
                                                />
                                                <div
                                                    class="w-10 h-10 rounded-full bg-indigo-500 border-2 border-transparent peer-checked:border-gray-900 peer-checked:ring-2 peer-checked:ring-indigo-300"
                                                ></div>
                                            </label>
                                            <label class="inline-flex items-center cursor-pointer">
                                                <input
                                                    type="radio"
                                                    name="subgroup-color"
                                                    value="#ef4444"
                                                    class="sr-only peer"
                                                />
                                                <div
                                                    class="w-10 h-10 rounded-full bg-red-500 border-2 border-transparent peer-checked:border-gray-900 peer-checked:ring-2 peer-checked:ring-red-300"
                                                ></div>
                                            </label>
                                            <label class="inline-flex items-center cursor-pointer">
                                                <input
                                                    type="radio"
                                                    name="subgroup-color"
                                                    value="#10b981"
                                                    class="sr-only peer"
                                                />
                                                <div
                                                    class="w-10 h-10 rounded-full bg-green-500 border-2 border-transparent peer-checked:border-gray-900 peer-checked:ring-2 peer-checked:ring-green-300"
                                                ></div>
                                            </label>
                                            <label class="inline-flex items-center cursor-pointer">
                                                <input
                                                    type="radio"
                                                    name="subgroup-color"
                                                    value="#f59e0b"
                                                    class="sr-only peer"
                                                />
                                                <div
                                                    class="w-10 h-10 rounded-full bg-amber-500 border-2 border-transparent peer-checked:border-gray-900 peer-checked:ring-2 peer-checked:ring-amber-300"
                                                ></div>
                                            </label>
                                            <label class="inline-flex items-center cursor-pointer">
                                                <input
                                                    type="radio"
                                                    name="subgroup-color"
                                                    value="#8b5cf6"
                                                    class="sr-only peer"
                                                />
                                                <div
                                                    class="w-10 h-10 rounded-full bg-violet-500 border-2 border-transparent peer-checked:border-gray-900 peer-checked:ring-2 peer-checked:ring-violet-300"
                                                ></div>
                                            </label>
                                            <label class="inline-flex items-center cursor-pointer">
                                                <input
                                                    type="radio"
                                                    name="subgroup-color"
                                                    value="#ec4899"
                                                    class="sr-only peer"
                                                />
                                                <div
                                                    class="w-10 h-10 rounded-full bg-pink-500 border-2 border-transparent peer-checked:border-gray-900 peer-checked:ring-2 peer-checked:ring-pink-300"
                                                ></div>
                                            </label>
                                            <label class="inline-flex items-center cursor-pointer">
                                                <input
                                                    type="radio"
                                                    name="subgroup-color"
                                                    value="#06b6d4"
                                                    class="sr-only peer"
                                                />
                                                <div
                                                    class="w-10 h-10 rounded-full bg-cyan-500 border-2 border-transparent peer-checked:border-gray-900 peer-checked:ring-2 peer-checked:ring-cyan-300"
                                                ></div>
                                            </label>
                                            <label class="inline-flex items-center cursor-pointer">
                                                <input
                                                    type="radio"
                                                    name="subgroup-color"
                                                    value="#84cc16"
                                                    class="sr-only peer"
                                                />
                                                <div
                                                    class="w-10 h-10 rounded-full bg-lime-500 border-2 border-transparent peer-checked:border-gray-900 peer-checked:ring-2 peer-checked:ring-lime-300"
                                                ></div>
                                            </label>
                                        </div>
                                    </div>
                                    <button
                                        type="submit"
                                        class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105"
                                    >
                                        Gruppe erstellen
                                    </button>
                                    <p
                                        id="subgroup-form-feedback"
                                        class="mt-3 text-sm font-medium text-center"
                                    ></p>
                                </form>
                            </div>

                            <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-md">
                                <h2 class="text-xl font-semibold mb-4">Bestehende Untergruppen</h2>
                                <div id="subgroups-list" class="space-y-4">
                                    <p class="text-gray-500 text-center py-8">
                                        Lade Untergruppen...
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <div
            id="exercise-modal"
            class="modal fixed inset-0 bg-gray-800 bg-opacity-75 h-full w-full hidden z-50 flex justify-center items-start py-8 overflow-y-auto"
        >
            <div
                class="relative mx-auto p-5 border w-full max-w-lg shadow-lg rounded-md bg-white my-auto"
            >
                <!-- Close button - absolute positioned with shadow -->
                <button
                    id="close-exercise-modal-button"
                    class="absolute top-3 right-3 text-gray-700 hover:text-gray-900 bg-white hover:bg-gray-100 rounded-full p-2 transition-colors shadow-lg border border-gray-200"
                    style="z-index: 9999"
                >
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M6 18L18 6M6 6l12 12"
                        />
                    </svg>
                </button>
                <div class="mb-4 pr-10">
                    <h3
                        id="modal-exercise-title"
                        class="text-xl leading-6 font-medium text-gray-900"
                    ></h3>
                </div>
                <img
                    id="modal-exercise-image"
                    src=""
                    alt="√úbungsbild"
                    class="w-full max-h-96 object-contain rounded-md mb-4"
                />
                <div id="modal-exercise-tags" class="mb-4"></div>
                <p
                    id="modal-exercise-description"
                    class="text-sm text-gray-600 mb-4"
                    style="white-space: pre-wrap"
                ></p>

                <!-- Abk√ºrzungen Legende -->
                <div class="mb-4 border-t border-gray-200 pt-3">
                    <button
                        id="toggle-abbreviations-coach"
                        class="flex items-center gap-2 text-sm text-gray-600 hover:text-gray-800 font-medium"
                    >
                        <svg
                            id="abbreviations-icon-coach"
                            class="w-4 h-4 transform transition-transform"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 9l-7 7-7-7"
                            ></path>
                        </svg>
                        üìñ Abk√ºrzungen anzeigen
                    </button>
                    <div
                        id="abbreviations-content-coach"
                        class="hidden mt-3 bg-gray-50 rounded-lg p-3"
                    >
                        <div class="grid grid-cols-2 gap-x-4 gap-y-1 text-xs">
                            <div><span class="font-semibold">VH</span> = Vorhand</div>
                            <div><span class="font-semibold">RH</span> = R√ºckhand</div>
                            <div><span class="font-semibold">T</span> = Topspin</div>
                            <div><span class="font-semibold">K</span> = Konter</div>
                            <div><span class="font-semibold">B</span> = Block</div>
                            <div><span class="font-semibold">S</span> = Smash</div>
                            <div><span class="font-semibold">F</span> = Flip</div>
                            <div><span class="font-semibold">SCH</span> = Schupf</div>
                            <div><span class="font-semibold">U</span> = Unterschnitt - Abwehr</div>
                            <div><span class="font-semibold">A</span> = Aufschlag</div>
                            <div><span class="font-semibold">OS</span> = Oberschnitt</div>
                            <div><span class="font-semibold">US</span> = Unterschnitt</div>
                            <div><span class="font-semibold">SS</span> = Seitenschnitt</div>
                        </div>
                    </div>
                </div>

                <!-- Milestones display -->
                <div id="modal-exercise-milestones"></div>

                <div class="text-right">
                    <span
                        id="modal-exercise-points"
                        class="font-bold text-indigo-600 bg-indigo-100 px-3 py-1 rounded-full text-md"
                    ></span>
                </div>
            </div>
        </div>

        <div
            id="attendance-modal"
            class="modal fixed inset-0 bg-gray-800 bg-opacity-75 overflow-y-auto h-full w-full hidden z-50 justify-center items-center"
        >
            <div class="relative mx-auto p-5 border w-full max-w-lg shadow-lg rounded-md bg-white">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl leading-6 font-medium text-gray-900">
                        Anwesenheit am <span id="attendance-modal-date"></span>
                    </h3>
                    <button
                        id="close-attendance-modal-button"
                        class="text-gray-400 hover:text-gray-600"
                    >
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"
                            />
                        </svg>
                    </button>
                </div>
                <form id="attendance-form" class="space-y-4">
                    <input type="hidden" id="attendance-date-input" />
                    <input type="hidden" id="attendance-doc-id-input" />

                    <!-- Coach selection -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Anwesende Trainer (mehrere ausw√§hlbar)
                        </label>
                        <div
                            id="attendance-coach-list"
                            class="border border-gray-300 rounded-md px-3 py-2 max-h-32 overflow-y-auto space-y-1"
                        >
                            <p class="text-sm text-gray-400">Trainer werden geladen...</p>
                        </div>
                    </div>

                    <div>
                        <div class="flex justify-between items-center mb-2">
                            <h4 class="text-md font-medium text-gray-800">Anwesende Spieler</h4>
                            <span class="text-sm text-gray-500"
                                >Ausgew√§hlt:
                                <span id="attendance-count" class="font-bold">0</span></span
                            >
                        </div>
                        <div
                            id="attendance-player-list"
                            class="mt-2 space-y-2 max-h-60 overflow-y-auto border p-2 rounded-md"
                        >
                            <p class="text-gray-400">Spieler werden geladen...</p>
                        </div>
                    </div>
                    <div>
                        <button
                            type="submit"
                            class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg"
                        >
                            Anwesenheit speichern
                        </button>
                        <p
                            id="attendance-feedback"
                            class="mt-3 text-sm font-medium text-center"
                        ></p>
                    </div>
                </form>

                <div class="mt-6 border-t pt-4">
                    <h4 class="text-md font-medium text-gray-800">Wettkampf-Paarungen</h4>
                    <p class="text-sm text-gray-500 mb-3">
                        Erstellt zuf√§llige Matches f√ºr alle anwesenden und match-bereiten Spieler.
                    </p>
                    <button
                        id="generate-pairings-button"
                        class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg"
                    >
                        <i class="fas fa-random mr-2"></i> Paarungen erstellen
                    </button>
                </div>
            </div>
        </div>

        <!-- Modal: Recurring Training Template -->
        <div
            id="recurring-training-modal"
            class="modal fixed inset-0 bg-gray-800 bg-opacity-75 overflow-y-auto h-full w-full hidden z-50 flex justify-center items-center"
        >
            <div class="relative mx-auto p-6 border w-full max-w-md shadow-lg rounded-md bg-white">
                <div class="flex justify-between items-center mb-4">
                    <h3
                        id="recurring-training-modal-title"
                        class="text-xl leading-6 font-medium text-gray-900"
                    >
                        Wiederkehrendes Training erstellen
                    </h3>
                    <button
                        id="close-recurring-training-modal-button"
                        class="text-gray-400 hover:text-gray-600"
                    >
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"
                            />
                        </svg>
                    </button>
                </div>
                <form id="recurring-training-form" class="space-y-4">
                    <input type="hidden" id="recurring-training-id-input" />

                    <div>
                        <label
                            for="recurring-training-day-select"
                            class="block text-sm font-medium text-gray-700"
                            >Wochentag</label
                        >
                        <select
                            id="recurring-training-day-select"
                            required
                            class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                        >
                            <option value="">Bitte w√§hlen...</option>
                            <option value="1">Montag</option>
                            <option value="2">Dienstag</option>
                            <option value="3">Mittwoch</option>
                            <option value="4">Donnerstag</option>
                            <option value="5">Freitag</option>
                            <option value="6">Samstag</option>
                            <option value="0">Sonntag</option>
                        </select>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label
                                for="recurring-training-start-time"
                                class="block text-sm font-medium text-gray-700"
                                >Startzeit</label
                            >
                            <input
                                type="time"
                                id="recurring-training-start-time"
                                required
                                class="mt-1 block w-full px-3 py-2 border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                            />
                        </div>
                        <div>
                            <label
                                for="recurring-training-end-time"
                                class="block text-sm font-medium text-gray-700"
                                >Endzeit</label
                            >
                            <input
                                type="time"
                                id="recurring-training-end-time"
                                required
                                class="mt-1 block w-full px-3 py-2 border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                            />
                        </div>
                    </div>

                    <div>
                        <label
                            for="recurring-training-subgroup-select"
                            class="block text-sm font-medium text-gray-700"
                            >Untergruppe</label
                        >
                        <select
                            id="recurring-training-subgroup-select"
                            required
                            class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                        >
                            <option value="">Bitte w√§hlen...</option>
                            <!-- Dynamisch gef√ºllt -->
                        </select>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label
                                for="recurring-training-start-date"
                                class="block text-sm font-medium text-gray-700"
                                >G√ºltig ab</label
                            >
                            <input
                                type="date"
                                id="recurring-training-start-date"
                                required
                                class="mt-1 block w-full px-3 py-2 border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                            />
                        </div>
                        <div>
                            <label
                                for="recurring-training-end-date"
                                class="block text-sm font-medium text-gray-700"
                                >G√ºltig bis (optional)</label
                            >
                            <input
                                type="date"
                                id="recurring-training-end-date"
                                class="mt-1 block w-full px-3 py-2 border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                            />
                        </div>
                    </div>

                    <div class="flex space-x-3">
                        <button
                            type="submit"
                            class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg"
                        >
                            Speichern
                        </button>
                        <button
                            type="button"
                            id="cancel-recurring-training-button"
                            class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg"
                        >
                            Abbrechen
                        </button>
                    </div>
                    <p
                        id="recurring-training-feedback"
                        class="mt-3 text-sm font-medium text-center"
                    ></p>
                </form>
            </div>
        </div>

        <!-- Modal: Session Selection -->
        <div
            id="session-selection-modal"
            class="modal fixed inset-0 bg-gray-800 bg-opacity-75 overflow-y-auto h-full w-full hidden z-50 flex justify-center items-center"
        >
            <div class="relative mx-auto p-6 border w-full max-w-md shadow-lg rounded-md bg-white">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl leading-6 font-medium text-gray-900">
                        Trainings am <span id="session-selection-date"></span>
                    </h3>
                    <button
                        id="close-session-selection-modal-button"
                        class="text-gray-400 hover:text-gray-600"
                    >
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"
                            />
                        </svg>
                    </button>
                </div>

                <div id="session-selection-list" class="space-y-3 mb-4">
                    <!-- Dynamisch gef√ºllt -->
                </div>

                <button
                    id="add-spontaneous-session-button"
                    class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center space-x-2"
                >
                    <i class="fas fa-plus"></i>
                    <span>Weiteres Training hinzuf√ºgen</span>
                </button>
            </div>
        </div>

        <!-- Modal: Spontaneous Training Session -->
        <div
            id="spontaneous-session-modal"
            class="modal fixed inset-0 bg-gray-800 bg-opacity-75 overflow-y-auto h-full w-full hidden z-50 flex justify-center items-center"
        >
            <div
                class="relative mx-auto p-6 border w-full max-w-2xl shadow-lg rounded-md bg-white max-h-[90vh] overflow-y-auto"
            >
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl leading-6 font-medium text-gray-900">
                        Spontanes Training erstellen
                    </h3>
                    <button
                        id="close-spontaneous-session-modal-button"
                        class="text-gray-400 hover:text-gray-600"
                    >
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"
                            />
                        </svg>
                    </button>
                </div>
                <form id="spontaneous-session-form" class="space-y-4">
                    <input type="hidden" id="spontaneous-session-date-input" />

                    <div>
                        <label
                            for="spontaneous-session-date-display"
                            class="block text-sm font-medium text-gray-700"
                            >Datum</label
                        >
                        <input
                            type="date"
                            id="spontaneous-session-date-display"
                            required
                            class="mt-1 block w-full px-3 py-2 border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                        />
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label
                                for="spontaneous-session-start-time"
                                class="block text-sm font-medium text-gray-700"
                                >Startzeit</label
                            >
                            <input
                                type="time"
                                id="spontaneous-session-start-time"
                                required
                                class="mt-1 block w-full px-3 py-2 border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                            />
                        </div>
                        <div>
                            <label
                                for="spontaneous-session-end-time"
                                class="block text-sm font-medium text-gray-700"
                                >Endzeit</label
                            >
                            <input
                                type="time"
                                id="spontaneous-session-end-time"
                                required
                                class="mt-1 block w-full px-3 py-2 border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                            />
                        </div>
                    </div>

                    <div>
                        <label
                            for="spontaneous-session-subgroup-select"
                            class="block text-sm font-medium text-gray-700"
                            >Untergruppe</label
                        >
                        <select
                            id="spontaneous-session-subgroup-select"
                            required
                            class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"
                        >
                            <option value="">Bitte w√§hlen...</option>
                            <!-- Dynamisch gef√ºllt -->
                        </select>
                    </div>

                    <!-- Optional Exercise Planning Toggle -->
                    <div class="border-t pt-4">
                        <button
                            type="button"
                            id="toggle-exercise-planning-button"
                            class="w-full flex items-center justify-between px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-300 transition"
                        >
                            <div class="flex items-center space-x-2">
                                <i class="fas fa-dumbbell text-gray-600"></i>
                                <span class="text-sm font-medium text-gray-700"
                                    >Optional: √úbungen planen</span
                                >
                            </div>
                            <i
                                id="toggle-exercise-planning-icon"
                                class="fas fa-chevron-down text-gray-400"
                            ></i>
                        </button>
                    </div>

                    <!-- Training Exercises Planning (Hidden by default) -->
                    <div id="exercise-planning-section" class="border-t pt-4 hidden">
                        <h4 class="text-md font-medium text-gray-800 mb-3">Geplante √úbungen</h4>
                        <p class="text-xs text-gray-500 mb-3">
                            W√§hle die √úbungen, die in diesem Training geplant sind. Diese k√∂nnen
                            beim Training-Abschluss angepasst werden.
                        </p>

                        <!-- Selected Exercises List -->
                        <div
                            id="selected-exercises-list"
                            class="space-y-2 mb-3 max-h-48 overflow-y-auto border rounded-md p-2 bg-gray-50"
                        >
                            <p class="text-xs text-gray-500 text-center py-2">
                                Keine √úbungen ausgew√§hlt
                            </p>
                        </div>

                        <!-- Exercise Selection -->
                        <div class="space-y-2">
                            <button
                                type="button"
                                id="open-exercise-selection-button"
                                class="w-full bg-green-600 hover:bg-green-700 text-white font-bold px-4 py-3 rounded-lg text-sm"
                            >
                                <i class="fas fa-plus mr-2"></i> √úbung hinzuf√ºgen
                            </button>
                            <button
                                type="button"
                                id="create-new-exercise-from-session-button"
                                class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium px-4 py-2 rounded-lg text-sm"
                            >
                                <i class="fas fa-plus-circle mr-2"></i> Neue √úbung erstellen
                            </button>
                        </div>
                    </div>

                    <div class="flex space-x-3">
                        <button
                            type="submit"
                            class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg"
                        >
                            Training erstellen
                        </button>
                        <button
                            type="button"
                            id="cancel-spontaneous-session-button"
                            class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg"
                        >
                            Abbrechen
                        </button>
                    </div>
                    <p
                        id="spontaneous-session-feedback"
                        class="mt-3 text-sm font-medium text-center"
                    ></p>
                </form>
            </div>
        </div>

        <!-- Modal: Training Completion -->
        <div
            id="training-completion-modal"
            class="modal fixed inset-0 bg-gray-800 bg-opacity-75 overflow-y-auto h-full w-full hidden z-50 flex justify-center items-center p-4"
        >
            <div
                class="relative mx-auto p-4 sm:p-6 border w-full max-w-4xl shadow-lg rounded-md bg-white max-h-[90vh] overflow-y-auto"
            >
                <div class="flex justify-between items-start mb-4">
                    <div class="flex-1 pr-4">
                        <h3 class="text-lg sm:text-xl leading-6 font-medium text-gray-900">
                            Training abschlie√üen
                        </h3>
                        <p
                            class="text-xs sm:text-sm text-gray-600 mt-1"
                            id="completion-session-info"
                        ></p>
                    </div>
                    <button
                        id="close-training-completion-modal-button"
                        class="text-gray-400 hover:text-gray-600 flex-shrink-0"
                    >
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"
                            />
                        </svg>
                    </button>
                </div>

                <form id="training-completion-form" class="space-y-6">
                    <input type="hidden" id="completion-session-id" />
                    <input type="hidden" id="completion-session-date" />

                    <!-- Summary -->
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <h4 class="font-medium text-gray-900 mb-2">üìä Zusammenfassung</h4>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm">
                            <div>
                                <span class="text-gray-600">Anwesende Spieler:</span>
                                <span
                                    id="completion-player-count"
                                    class="ml-2 font-bold text-indigo-600"
                                    >0</span
                                >
                            </div>
                            <div>
                                <span class="text-gray-600">Geplante √úbungen:</span>
                                <span
                                    id="completion-planned-count"
                                    class="ml-2 font-bold text-indigo-600"
                                    >0</span
                                >
                            </div>
                        </div>
                    </div>

                    <!-- Editable Checklist -->
                    <div>
                        <div
                            class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 mb-3"
                        >
                            <h4 class="text-md font-medium text-gray-800">Durchgef√ºhrte √úbungen</h4>
                            <button
                                type="button"
                                id="add-spontaneous-exercise-button"
                                class="text-sm bg-green-600 hover:bg-green-700 text-white font-medium px-3 py-1 rounded whitespace-nowrap"
                            >
                                <i class="fas fa-plus mr-1"></i> Spontane √úbung hinzuf√ºgen
                            </button>
                        </div>
                        <p class="text-xs text-gray-500 mb-3">
                            Hake ab, was tats√§chlich gemacht wurde. Nicht durchgef√ºhrte √úbungen
                            einfach abhaken lassen.
                        </p>

                        <!-- Planned Exercises (left column) -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <h5
                                    class="text-sm font-medium text-gray-700 mb-2 bg-gray-100 px-2 py-1 rounded"
                                >
                                    üìã Geplante √úbungen
                                </h5>
                                <div id="completion-planned-exercises" class="space-y-2">
                                    <!-- Dynamisch gef√ºllt -->
                                </div>
                            </div>

                            <!-- Spontaneous Exercises (right column) -->
                            <div>
                                <h5
                                    class="text-sm font-medium text-gray-700 mb-2 bg-green-100 px-2 py-1 rounded"
                                >
                                    ‚ûï Spontane √úbungen
                                </h5>
                                <div id="completion-spontaneous-exercises" class="space-y-2">
                                    <p class="text-xs text-gray-400 text-center py-4">
                                        Keine spontanen √úbungen hinzugef√ºgt
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Submit -->
                    <div class="border-t pt-4">
                        <button
                            type="submit"
                            class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg"
                        >
                            <i class="fas fa-check mr-2"></i> Abschluss speichern & Punkte vergeben
                        </button>
                        <p
                            id="training-completion-feedback"
                            class="mt-3 text-sm font-medium text-center"
                        ></p>
                    </div>
                </form>
            </div>
        </div>

        <!-- Modal: Exercise Selection for Session Planning -->
        <div
            id="exercise-selection-modal"
            class="modal fixed inset-0 bg-gray-800 bg-opacity-75 overflow-y-auto h-full w-full hidden z-[60] flex justify-center items-center"
        >
            <div
                class="relative mx-auto border w-full max-w-5xl shadow-lg rounded-md bg-white max-h-[90vh] flex flex-col"
            >
                <!-- Header (fixed) -->
                <div class="p-6 pb-4 border-b bg-white rounded-t-md">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl leading-6 font-medium text-gray-900">
                            √úbung zum Training hinzuf√ºgen
                        </h3>
                        <button
                            id="close-exercise-selection-modal-button"
                            class="text-gray-400 hover:text-gray-600"
                        >
                            <svg
                                class="h-6 w-6"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke="currentColor"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M6 18L18 6M6 6l12 12"
                                />
                            </svg>
                        </button>
                    </div>

                    <!-- Selection Counter -->
                    <div class="p-3 bg-blue-50 border border-blue-200 rounded-lg text-center">
                        <div id="exercise-selection-counter" class="text-sm">
                            <span class="text-gray-500">Keine √úbungen ausgew√§hlt</span>
                        </div>
                    </div>
                </div>

                <!-- Scrollable Content -->
                <div class="flex-1 overflow-y-auto px-6 py-4">
                    <!-- Search bar -->
                    <div class="mb-3">
                        <input
                            type="text"
                            id="exercise-selection-search"
                            placeholder="üîç √úbung suchen (Name oder Tag)..."
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
                        />
                    </div>

                    <!-- Tag filters -->
                    <div class="mb-4">
                        <div class="flex items-center gap-2 flex-wrap" id="exercise-tag-filters">
                            <span class="text-xs text-gray-500">Filter:</span>
                            <button
                                type="button"
                                class="tag-filter-btn active px-3 py-1 text-xs rounded-full border border-gray-300 bg-indigo-100 text-indigo-700 hover:bg-indigo-200 transition"
                                data-tag="all"
                            >
                                Alle
                            </button>
                            <!-- Dynamisch gef√ºllt mit Tags -->
                        </div>
                    </div>

                    <!-- Exercise grid -->
                    <div
                        id="exercise-selection-grid"
                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pb-4"
                    >
                        <!-- Dynamisch gef√ºllt -->
                        <div class="col-span-full text-center py-8 text-gray-500">
                            Lade √úbungen...
                        </div>
                    </div>
                </div>

                <!-- Footer with floating button (fixed) -->
                <div class="p-6 pt-4 border-t bg-white rounded-b-md">
                    <button
                        type="button"
                        id="done-selecting-exercises-button"
                        class="w-full bg-gray-400 cursor-not-allowed text-white font-bold py-3 px-4 rounded-lg transition-all"
                        disabled
                    >
                        <i class="fas fa-check mr-2"></i> √úbungen hinzuf√ºgen
                    </button>
                </div>
            </div>
        </div>

        <!-- Modal: Training Information -->
        <div
            id="training-info-modal"
            class="modal fixed inset-0 bg-gray-800 bg-opacity-75 overflow-y-auto h-full w-full hidden z-50 flex justify-center items-center"
        >
            <div
                class="relative mx-auto p-6 border w-full max-w-2xl shadow-lg rounded-md bg-white max-h-[90vh] overflow-y-auto"
            >
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl leading-6 font-medium text-gray-900">
                        Trainingsinformationen
                    </h3>
                    <button
                        id="close-training-info-modal-button"
                        class="text-gray-400 hover:text-gray-600"
                    >
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"
                            />
                        </svg>
                    </button>
                </div>

                <!-- Session Info -->
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                    <h4 class="font-medium text-gray-900 mb-2">üìÖ Training Details</h4>
                    <div class="space-y-1 text-sm">
                        <p>
                            <span class="text-gray-600">Gruppe:</span>
                            <span
                                id="training-info-subgroup"
                                class="ml-2 font-semibold text-gray-900"
                            ></span>
                        </p>
                        <p>
                            <span class="text-gray-600">Zeit:</span>
                            <span
                                id="training-info-time"
                                class="ml-2 font-semibold text-gray-900"
                            ></span>
                        </p>
                        <p>
                            <span class="text-gray-600">Datum:</span>
                            <span
                                id="training-info-date"
                                class="ml-2 font-semibold text-gray-900"
                            ></span>
                        </p>
                        <p id="training-info-status" class="mt-2"></p>
                    </div>
                </div>

                <!-- Planned Exercises -->
                <div>
                    <h4 class="text-md font-medium text-gray-800 mb-3">üìã Geplante √úbungen</h4>
                    <div id="training-info-exercises-list" class="space-y-2">
                        <!-- Dynamisch gef√ºllt -->
                    </div>
                </div>

                <!-- Completed Exercises (only show if training is completed) -->
                <div id="training-info-completed-section" class="hidden mt-4">
                    <h4 class="text-md font-medium text-gray-800 mb-3">‚úÖ Durchgef√ºhrte √úbungen</h4>
                    <div id="training-info-completed-exercises" class="space-y-2">
                        <!-- Dynamisch gef√ºllt -->
                    </div>
                </div>

                <!-- Single Players (only show if training is completed and has single players) -->
                <div id="training-info-single-players-section" class="hidden mt-4">
                    <h4 class="text-md font-medium text-gray-800 mb-3">üë§ Einzelspieler</h4>
                    <div id="training-info-single-players-list" class="space-y-2">
                        <!-- Dynamisch gef√ºllt -->
                    </div>
                </div>

                <!-- Close Button -->
                <div class="mt-6">
                    <button
                        type="button"
                        id="close-training-info-button"
                        class="w-full bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg"
                    >
                        Schlie√üen
                    </button>
                </div>
            </div>
        </div>

        <!-- Modal: Partner Pairing for Exercise -->
        <div
            id="partner-pairing-modal"
            class="modal fixed inset-0 bg-gray-800 bg-opacity-75 overflow-y-auto h-full w-full hidden z-50 flex justify-center items-center"
        >
            <div
                class="relative mx-auto p-6 border w-full max-w-3xl shadow-lg rounded-md bg-white max-h-[90vh] overflow-y-auto"
            >
                <div class="flex justify-between items-center mb-4">
                    <div>
                        <h3 class="text-xl leading-6 font-medium text-gray-900">
                            Partner-Paarungen bilden
                        </h3>
                        <p class="text-sm text-gray-600 mt-1" id="pairing-exercise-name"></p>
                    </div>
                    <button
                        id="close-partner-pairing-modal-button"
                        class="text-gray-400 hover:text-gray-600"
                    >
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"
                            />
                        </svg>
                    </button>
                </div>

                <!-- Instructions -->
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                    <h4 class="font-medium text-gray-900 mb-2">üìù Anleitung</h4>
                    <ul class="text-sm text-gray-700 space-y-1">
                        <li>
                            ‚Ä¢ <strong>Paar bilden:</strong> Klicke auf zwei Spieler ‚Üí W√§hle Ergebnis
                            (Beide / Nur einer / Nicht geschafft)
                        </li>
                        <li>
                            ‚Ä¢ <strong>Mit Trainer:</strong> Klicke auf einen Spieler ‚Üí Button "Mit
                            Trainer trainieren" ‚Üí W√§hle Ergebnis (Geschafft / Nicht geschafft)
                        </li>
                    </ul>
                </div>

                <!-- Available Players -->
                <div class="mb-4">
                    <h4 class="text-md font-medium text-gray-800 mb-3">Verf√ºgbare Spieler</h4>
                    <div id="available-players-list" class="grid grid-cols-2 md:grid-cols-3 gap-2">
                        <!-- Dynamisch gef√ºllt -->
                    </div>
                </div>

                <!-- Single Player Option (when 1 player selected) -->
                <div id="single-player-option-container" class="mb-4 hidden">
                    <!-- Dynamisch gef√ºllt -->
                </div>

                <!-- Formed Pairs -->
                <div class="mb-4">
                    <h4 class="text-md font-medium text-gray-800 mb-3">Gebildete Paare</h4>
                    <div id="formed-pairs-list" class="space-y-2">
                        <p class="text-xs text-gray-400 text-center py-4">
                            Noch keine Paare gebildet
                        </p>
                    </div>
                </div>

                <!-- Single Players -->
                <div id="single-players-container" class="mb-4 hidden">
                    <h4 class="text-md font-medium text-gray-800 mb-3">
                        Einzelspieler (mit Trainer)
                    </h4>
                    <div id="single-players-list" class="space-y-2">
                        <!-- Dynamisch gef√ºllt -->
                    </div>
                </div>

                <!-- Submit -->
                <div class="border-t pt-4">
                    <button
                        type="button"
                        id="confirm-pairing-button"
                        class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg"
                    >
                        <i class="fas fa-check mr-2"></i> Paarungen best√§tigen
                    </button>
                    <p id="pairing-feedback" class="mt-3 text-sm font-medium text-center"></p>
                </div>
            </div>
        </div>

        <!-- Modal: Edit Subgroup -->
        <div
            id="edit-subgroup-modal"
            class="modal fixed inset-0 bg-gray-800 bg-opacity-75 overflow-y-auto h-full w-full hidden z-50 flex justify-center items-center"
        >
            <div class="relative mx-auto p-6 border w-full max-w-md shadow-lg rounded-md bg-white">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl leading-6 font-medium text-gray-900">
                        Untergruppe bearbeiten
                    </h3>
                    <button
                        id="close-edit-subgroup-modal-button"
                        class="text-gray-400 hover:text-gray-600"
                    >
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"
                            />
                        </svg>
                    </button>
                </div>
                <form id="edit-subgroup-form" class="space-y-4">
                    <input type="hidden" id="edit-subgroup-id" />

                    <div>
                        <label
                            for="edit-subgroup-name"
                            class="block text-sm font-medium text-gray-700"
                            >Gruppenname</label
                        >
                        <input
                            type="text"
                            id="edit-subgroup-name"
                            required
                            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                        />
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2"
                            >Farbe f√ºr Kalender</label
                        >
                        <div class="flex gap-2 flex-wrap">
                            <label class="inline-flex items-center cursor-pointer">
                                <input
                                    type="radio"
                                    name="edit-subgroup-color"
                                    value="#6366f1"
                                    class="sr-only peer"
                                />
                                <div
                                    class="w-10 h-10 rounded-full bg-indigo-500 border-2 border-transparent peer-checked:border-gray-900 peer-checked:ring-2 peer-checked:ring-indigo-300"
                                ></div>
                            </label>
                            <label class="inline-flex items-center cursor-pointer">
                                <input
                                    type="radio"
                                    name="edit-subgroup-color"
                                    value="#ef4444"
                                    class="sr-only peer"
                                />
                                <div
                                    class="w-10 h-10 rounded-full bg-red-500 border-2 border-transparent peer-checked:border-gray-900 peer-checked:ring-2 peer-checked:ring-red-300"
                                ></div>
                            </label>
                            <label class="inline-flex items-center cursor-pointer">
                                <input
                                    type="radio"
                                    name="edit-subgroup-color"
                                    value="#10b981"
                                    class="sr-only peer"
                                />
                                <div
                                    class="w-10 h-10 rounded-full bg-green-500 border-2 border-transparent peer-checked:border-gray-900 peer-checked:ring-2 peer-checked:ring-green-300"
                                ></div>
                            </label>
                            <label class="inline-flex items-center cursor-pointer">
                                <input
                                    type="radio"
                                    name="edit-subgroup-color"
                                    value="#f59e0b"
                                    class="sr-only peer"
                                />
                                <div
                                    class="w-10 h-10 rounded-full bg-amber-500 border-2 border-transparent peer-checked:border-gray-900 peer-checked:ring-2 peer-checked:ring-amber-300"
                                ></div>
                            </label>
                            <label class="inline-flex items-center cursor-pointer">
                                <input
                                    type="radio"
                                    name="edit-subgroup-color"
                                    value="#8b5cf6"
                                    class="sr-only peer"
                                />
                                <div
                                    class="w-10 h-10 rounded-full bg-violet-500 border-2 border-transparent peer-checked:border-gray-900 peer-checked:ring-2 peer-checked:ring-violet-300"
                                ></div>
                            </label>
                            <label class="inline-flex items-center cursor-pointer">
                                <input
                                    type="radio"
                                    name="edit-subgroup-color"
                                    value="#ec4899"
                                    class="sr-only peer"
                                />
                                <div
                                    class="w-10 h-10 rounded-full bg-pink-500 border-2 border-transparent peer-checked:border-gray-900 peer-checked:ring-2 peer-checked:ring-pink-300"
                                ></div>
                            </label>
                            <label class="inline-flex items-center cursor-pointer">
                                <input
                                    type="radio"
                                    name="edit-subgroup-color"
                                    value="#06b6d4"
                                    class="sr-only peer"
                                />
                                <div
                                    class="w-10 h-10 rounded-full bg-cyan-500 border-2 border-transparent peer-checked:border-gray-900 peer-checked:ring-2 peer-checked:ring-cyan-300"
                                ></div>
                            </label>
                            <label class="inline-flex items-center cursor-pointer">
                                <input
                                    type="radio"
                                    name="edit-subgroup-color"
                                    value="#84cc16"
                                    class="sr-only peer"
                                />
                                <div
                                    class="w-10 h-10 rounded-full bg-lime-500 border-2 border-transparent peer-checked:border-gray-900 peer-checked:ring-2 peer-checked:ring-lime-300"
                                ></div>
                            </label>
                        </div>
                    </div>

                    <div class="flex space-x-3">
                        <button
                            type="submit"
                            class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg"
                        >
                            √Ñnderungen speichern
                        </button>
                        <button
                            type="button"
                            id="cancel-edit-subgroup-button"
                            class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-lg"
                        >
                            Abbrechen
                        </button>
                    </div>
                    <p id="edit-subgroup-feedback" class="mt-3 text-sm font-medium text-center"></p>
                </form>
            </div>
        </div>

        <div
            id="player-list-modal"
            class="modal fixed inset-0 bg-gray-800 bg-opacity-75 overflow-y-auto h-full w-full hidden z-50 justify-center items-center p-4"
        >
            <div
                class="relative mx-auto border w-full max-w-6xl shadow-lg rounded-2xl bg-white flex flex-col h-[90vh]"
            >
                <div class="flex justify-between items-center p-5 border-b">
                    <h3 class="text-xl leading-6 font-medium text-gray-900">Spielerverwaltung</h3>
                    <button
                        id="close-player-modal-button"
                        class="text-gray-400 hover:text-gray-600"
                    >
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"
                            />
                        </svg>
                    </button>
                </div>

                <div id="modal-loader" class="text-center py-20">
                    <svg
                        class="animate-spin h-8 w-8 text-indigo-600 mx-auto"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                    >
                        <circle
                            class="opacity-25"
                            cx="12"
                            cy="12"
                            r="10"
                            stroke="currentColor"
                            stroke-width="4"
                        ></circle>
                        <path
                            class="opacity-75"
                            fill="currentColor"
                            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                        ></path>
                    </svg>
                    <p class="mt-2 text-sm text-gray-600">Lade Spieler...</p>
                </div>

                <div
                    id="modal-player-list-container"
                    class="hidden flex-grow overflow-hidden flex flex-col md:flex-row"
                >
                    <!-- Spieler-Liste (Links auf Desktop, oben auf Mobile) -->
                    <div
                        class="w-full md:w-1/3 h-full flex flex-col border-b md:border-b-0 md:border-r border-gray-200 bg-gray-50"
                    >
                        <div class="p-3 border-b border-gray-200">
                            <input
                                type="text"
                                id="player-search-input"
                                placeholder="Spieler suchen..."
                                class="w-full px-3 py-2 text-sm border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
                            />
                        </div>
                        <div
                            id="modal-player-list"
                            class="overflow-y-auto flex-grow divide-y divide-gray-200"
                        ></div>
                    </div>

                    <!-- Details Panel (Rechts auf Desktop, Full-Screen Modal auf Mobile) -->
                    <div
                        class="hidden md:flex md:w-2/3 h-full flex-col overflow-hidden"
                        id="player-detail-container-desktop"
                    >
                        <div class="flex-grow overflow-y-auto">
                            <div id="player-detail-panel-desktop" class="p-6 hidden">
                                <h4 class="text-2xl font-bold text-gray-900 mb-6">
                                    Spieler-Details
                                </h4>

                                <div id="player-detail-content-desktop" class="space-y-6"></div>

                                <div class="mt-8 pt-6 border-t border-gray-200">
                                    <h5 class="text-lg font-medium text-gray-900 mb-4">Aktionen</h5>
                                    <div id="player-detail-actions-desktop" class="space-y-3"></div>
                                </div>
                            </div>

                            <div
                                id="player-detail-placeholder-desktop"
                                class="h-full flex items-center justify-center text-center text-gray-500"
                            >
                                <div class="p-6">
                                    <svg
                                        class="mx-auto h-12 w-12 text-gray-400"
                                        xmlns="http://www.w3.org/2000/svg"
                                        fill="none"
                                        viewBox="0 0 24 24"
                                        stroke-width="1"
                                        stroke="currentColor"
                                    >
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"
                                        />
                                    </svg>
                                    <h3 class="mt-2 text-sm font-medium text-gray-900">
                                        Spieler ausw√§hlen
                                    </h3>
                                    <p class="mt-1 text-sm text-gray-500">
                                        W√§hle einen Spieler aus der Liste, um Details und Aktionen
                                        anzuzeigen.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile Player Details Modal -->
        <div
            id="player-detail-mobile-modal"
            class="md:hidden fixed inset-0 bg-gray-800 bg-opacity-75 z-50 hidden"
        >
            <div class="fixed inset-0 overflow-y-auto">
                <div class="flex min-h-full items-end justify-center p-0">
                    <div
                        class="relative w-full bg-white rounded-t-2xl shadow-xl transform transition-all max-h-[90vh] overflow-y-auto"
                    >
                        <div
                            class="sticky top-0 bg-white border-b border-gray-200 px-4 py-3 flex justify-between items-center"
                        >
                            <h4 class="text-lg font-semibold text-gray-900">Spieler-Details</h4>
                            <button
                                id="close-player-detail-mobile"
                                class="text-gray-400 hover:text-gray-600"
                            >
                                <svg
                                    class="h-6 w-6"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke="currentColor"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12"
                                    />
                                </svg>
                            </button>
                        </div>

                        <div class="p-6">
                            <div id="player-detail-content-mobile" class="space-y-6"></div>

                            <div class="mt-8 pt-6 border-t border-gray-200">
                                <h5 class="text-lg font-medium text-gray-900 mb-4">Aktionen</h5>
                                <div id="player-detail-actions-mobile" class="space-y-3"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div
            id="edit-player-modal"
            class="modal fixed inset-0 bg-gray-800 bg-opacity-75 overflow-y-auto h-full w-full hidden z-50 justify-center items-center"
        >
            <div class="relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl leading-6 font-medium text-gray-900">Spieler bearbeiten</h3>
                    <button
                        id="close-edit-player-modal-button"
                        class="text-gray-400 hover:text-gray-600"
                    >
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"
                            />
                        </svg>
                    </button>
                </div>
                <div id="edit-player-content">
                    <p class="text-sm text-gray-600 mb-4">
                        Spieler: <span id="edit-player-name" class="font-semibold"></span>
                    </p>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2"
                            >Untergruppen-Zugeh√∂rigkeit</label
                        >
                        <div
                            id="edit-player-subgroups-checkboxes"
                            class="space-y-2 max-h-60 overflow-y-auto border border-gray-300 rounded-md p-3"
                        >
                            <p class="text-xs text-gray-500">Lade Gruppen...</p>
                        </div>
                    </div>
                    <button
                        id="save-player-subgroups-button"
                        class="mt-4 w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg"
                    >
                        √Ñnderungen speichern
                    </button>
                    <p id="edit-player-feedback" class="mt-3 text-sm font-medium text-center"></p>
                </div>
            </div>
        </div>

        <div
            id="add-offline-player-modal"
            class="modal fixed inset-0 bg-gray-800 bg-opacity-75 overflow-y-auto h-full w-full hidden z-50 justify-center items-center"
        >
            <div class="relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl leading-6 font-medium text-gray-900">
                        Offline-Spieler erstellen
                    </h3>
                    <button
                        id="close-add-player-modal-button"
                        class="text-gray-400 hover:text-gray-600"
                    >
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"
                            />
                        </svg>
                    </button>
                </div>

                <form id="add-offline-player-form" class="space-y-4">
                    <div>
                        <label for="firstName" class="block text-sm font-medium text-gray-700"
                            >Vorname</label
                        >
                        <input
                            type="text"
                            id="firstName"
                            required
                            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                        />
                    </div>
                    <div>
                        <label for="lastName" class="block text-sm font-medium text-gray-700"
                            >Nachname</label
                        >
                        <input
                            type="text"
                            id="lastName"
                            required
                            class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                        />
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2"
                            >Untergruppen zuweisen</label
                        >
                        <div
                            id="player-subgroups-checkboxes"
                            class="space-y-2 max-h-40 overflow-y-auto border border-gray-300 rounded-md p-3"
                        >
                            <p class="text-xs text-gray-500">Lade Gruppen...</p>
                        </div>
                    </div>

                    <div class="border-t border-gray-200 pt-4 mt-4">
                        <div class="flex items-start">
                            <div class="flex items-center h-5">
                                <input
                                    id="is-match-ready-checkbox"
                                    type="checkbox"
                                    class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
                                />
                            </div>
                            <div class="ml-3 text-sm">
                                <label
                                    for="is-match-ready-checkbox"
                                    class="font-medium text-gray-700"
                                >
                                    Bereits wettkampfsbereit
                                </label>
                                <p class="text-xs text-gray-500 mt-1">
                                    Spieler hat bereits Erfahrung und kann sofort Matches spielen
                                    (√ºberspringt Grundlagen-√úbungen)
                                </p>
                            </div>
                        </div>

                        <!-- QTTR Punkte Eingabe (nur sichtbar wenn wettkampfsbereit) -->
                        <div id="qttr-input-container" class="mt-4 hidden">
                            <label
                                for="qttr-points"
                                class="block text-sm font-medium text-gray-700 mb-1"
                            >
                                QTTR-Punkte (optional)
                            </label>
                            <input
                                type="number"
                                id="qttr-points"
                                min="800"
                                max="2500"
                                step="1"
                                placeholder="z.B. 1200"
                                class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-sm"
                            />
                            <p class="text-xs text-gray-500 mt-1">
                                <i class="fas fa-info-circle mr-1"></i>Wenn angegeben, wird die
                                Start-ELO entsprechend angepasst (800-2500)
                            </p>
                        </div>
                    </div>

                    <div class="border-t border-gray-200 pt-4 mt-4">
                        <label class="block text-sm font-medium text-gray-700 mb-3"
                            >Einladung senden? (Optional)</label
                        >
                        <div class="space-y-2">
                            <label class="flex items-center cursor-pointer">
                                <input
                                    type="radio"
                                    name="invitation-type"
                                    value="none"
                                    checked
                                    class="mr-2"
                                />
                                <span class="text-sm">Keine Einladung (nur Offline-Spieler)</span>
                            </label>
                            <label class="flex items-center cursor-pointer">
                                <input
                                    type="radio"
                                    name="invitation-type"
                                    value="code"
                                    class="mr-2"
                                />
                                <span class="text-sm">Einladungscode generieren</span>
                            </label>
                        </div>
                    </div>

                    <button
                        type="submit"
                        class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg"
                    >
                        <i class="fas fa-user-plus mr-2"></i>Spieler erstellen
                    </button>
                </form>

                <!-- Code Display (shown after code generation) -->
                <div id="generated-code-display" class="hidden space-y-4">
                    <div class="bg-green-50 border-2 border-green-300 rounded-lg p-6 text-center">
                        <p class="text-sm text-green-800 mb-2 font-semibold">
                            <i class="fas fa-check-circle mr-1"></i>Spieler erstellt & Code
                            generiert!
                        </p>
                        <div class="bg-white border-2 border-green-400 rounded-lg p-4 my-4">
                            <p
                                id="generated-code-text"
                                class="text-3xl font-bold text-gray-900 tracking-wider"
                            >
                                TTV-XXX-YYY
                            </p>
                        </div>
                        <p class="text-xs text-gray-600 mb-4">
                            G√ºltig f√ºr
                            <span id="code-validity-days" class="font-semibold">7 Tage</span>
                        </p>

                        <div class="flex flex-col space-y-2">
                            <button
                                id="copy-code-button"
                                class="bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg transition"
                            >
                                <i class="fas fa-copy mr-2"></i>Code kopieren
                            </button>
                            <button
                                id="whatsapp-share-button"
                                class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition"
                            >
                                <i class="fab fa-whatsapp mr-2"></i>Per WhatsApp teilen
                            </button>
                        </div>
                    </div>

                    <button
                        id="close-after-code-button"
                        class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg"
                    >
                        Schlie√üen
                    </button>
                </div>
            </div>
        </div>

        <!-- Modal: Code-Verwaltung -->
        <div
            id="invitation-codes-modal"
            class="modal fixed inset-0 bg-gray-800 bg-opacity-75 overflow-y-auto h-full w-full hidden z-50 justify-center items-center"
        >
            <div class="relative mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl leading-6 font-medium text-gray-900">
                        <i class="fas fa-key mr-2 text-indigo-600"></i>Einladungscodes verwalten
                    </h3>
                    <button
                        id="close-invitation-codes-modal-button"
                        class="text-gray-400 hover:text-gray-600"
                    >
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"
                            />
                        </svg>
                    </button>
                </div>

                <div id="invitation-codes-list" class="space-y-3 max-h-96 overflow-y-auto">
                    <p class="text-center text-gray-500">Lade Codes...</p>
                </div>

                <div class="mt-4 text-center text-sm text-gray-600">
                    <p>
                        <i class="fas fa-info-circle mr-1"></i>Codes sind 7 Tage g√ºltig und nur
                        einmalig verwendbar
                    </p>
                </div>
            </div>
        </div>

        <!-- Modal: Einladung an bestehenden Spieler senden -->
        <div
            id="send-invitation-modal"
            class="modal fixed inset-0 bg-gray-800 bg-opacity-75 overflow-y-auto h-full w-full hidden z-50 justify-center items-center"
        >
            <div class="relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl leading-6 font-medium text-gray-900">
                        <i class="fas fa-paper-plane mr-2 text-indigo-600"></i>Einladung versenden
                    </h3>
                    <button
                        id="close-send-invitation-modal-button"
                        class="text-gray-400 hover:text-gray-600"
                    >
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"
                            />
                        </svg>
                    </button>
                </div>

                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                    <p class="text-sm text-blue-800">
                        <i class="fas fa-info-circle mr-1"></i>
                        Sende eine Einladung an
                        <strong id="invitation-player-name">Spieler</strong>, damit er/sie sich
                        online anmelden kann.
                    </p>
                </div>

                <form id="send-invitation-form" class="space-y-4">
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                        <p class="text-sm text-blue-800">
                            <i class="fas fa-qrcode mr-2"></i>
                            Ein Einladungscode wird generiert, den du per WhatsApp oder anders mit
                            dem Spieler teilen kannst.
                        </p>
                    </div>

                    <button
                        type="submit"
                        class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg"
                    >
                        <i class="fas fa-key mr-2"></i>Code generieren
                    </button>
                </form>

                <!-- Code Display (after generation) -->
                <div id="send-invitation-code-display" class="hidden space-y-4">
                    <div class="bg-green-50 border-2 border-green-300 rounded-lg p-6 text-center">
                        <p class="text-sm text-green-800 mb-2 font-semibold">
                            <i class="fas fa-check-circle mr-1"></i>Code erfolgreich erstellt!
                        </p>
                        <div class="bg-white border-2 border-green-400 rounded-lg p-4 my-4">
                            <p
                                id="send-invitation-code-text"
                                class="text-3xl font-bold text-gray-900 tracking-wider"
                            >
                                TTV-XXX-YYY
                            </p>
                        </div>
                        <p class="text-xs text-gray-600 mb-4">
                            G√ºltig f√ºr <span class="font-semibold">7 Tage</span>
                        </p>

                        <div class="flex flex-col space-y-2">
                            <button
                                id="copy-invitation-code-button"
                                class="bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg transition"
                            >
                                <i class="fas fa-copy mr-2"></i>Code kopieren
                            </button>
                            <button
                                id="whatsapp-invitation-share-button"
                                class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition"
                            >
                                <i class="fab fa-whatsapp mr-2"></i>Per WhatsApp teilen
                            </button>
                        </div>
                    </div>

                    <button
                        id="close-send-invitation-after-code-button"
                        class="w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg"
                    >
                        Schlie√üen
                    </button>
                </div>
            </div>
        </div>

        <div
            id="pairings-modal"
            class="modal fixed inset-0 bg-gray-800 bg-opacity-75 overflow-y-auto h-full w-full hidden z-50 justify-center items-center"
        >
            <div class="relative mx-auto p-5 border w-full max-w-lg shadow-lg rounded-md bg-white">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl leading-6 font-medium text-gray-900">
                        <i class="fas fa-random mr-2 text-green-600"></i> Erstellte Paarungen
                    </h3>
                    <button
                        id="close-pairings-modal-button"
                        class="text-gray-400 hover:text-gray-600"
                    >
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"
                            />
                        </svg>
                    </button>
                </div>
                <div id="modal-pairings-content" class="space-y-4">
                    <p class="text-center text-gray-500">Paarungen werden geladen...</p>
                </div>
            </div>
        </div>

        <div
            id="reactivate-challenge-modal"
            class="modal fixed inset-0 bg-gray-800 bg-opacity-75 overflow-y-auto h-full w-full hidden z-50 justify-center items-center"
        >
            <div class="relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl leading-6 font-medium text-gray-900">
                        Challenge reaktivieren
                    </h3>
                    <button id="close-reactivate-modal" class="text-gray-400 hover:text-gray-600">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"
                            />
                        </svg>
                    </button>
                </div>
                <div class="mt-2">
                    <p class="text-sm text-gray-500 mb-4">
                        Challenge:
                        <span id="reactivate-challenge-title" class="font-semibold"></span>
                    </p>

                    <div class="mb-4">
                        <label
                            for="reactivate-challenge-subgroup"
                            class="block text-sm font-medium text-gray-700 mb-2"
                            >Untergruppe</label
                        >
                        <select
                            id="reactivate-challenge-subgroup"
                            required
                            class="w-full px-3 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 rounded-md"
                        >
                            <option value="all">Alle (Gesamtverein)</option>
                            <!-- Subgroups will be loaded dynamically -->
                        </select>
                    </div>

                    <p class="text-sm text-gray-700 mb-4">Wie lange soll die Challenge laufen?</p>
                    <div class="space-y-3">
                        <button
                            onclick="handleReactivate('daily')"
                            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg"
                        >
                            üìÖ 1 Tag
                        </button>
                        <button
                            onclick="handleReactivate('weekly')"
                            class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-4 rounded-lg"
                        >
                            üìÜ 1 Woche
                        </button>
                        <button
                            onclick="handleReactivate('monthly')"
                            class="w-full bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 px-4 rounded-lg"
                        >
                            üìÖ 1 Monat
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <script src="/js/update-checker.js"></script>
        <script type="module" src="/js/notifications.js"></script>
        <script type="module" src="/js/spa-enhancer.js"></script>
        <script type="module" src="/js/coach.js"></script>
    </body>
</html>
