<!doctype html>
<html lang="de">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />

        <!-- Google Analytics 4 -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z3R3M51GJX"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-Z3R3M51GJX');
        </script>

        <script src="/js/capacitor-init.js"></script>
        <title>Profil vervollständigen - SC Champions</title>

        <!-- Favicon -->
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

        <!-- PWA Meta Tags -->
        <link rel="manifest" href="/manifest.json" />
        <meta name="theme-color" content="#1e3a5f" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <meta name="apple-mobile-web-app-title" content="SC Champions" />
        <link rel="apple-touch-icon" href="/icons/icon-152x152.png" />
        <meta name="mobile-web-app-capable" content="yes" />

        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-H2R9ZJYQ06"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag('js', new Date());
            gtag('config', 'G-H2R9ZJYQ06');
        </script>

        <script src="https://cdn.tailwindcss.com"></script>
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="/css/mobile-fixes.css" />
        <style>
            body {
                font-family: 'Inter', sans-serif;
            }
        </style>
    </head>
    <body class="bg-gray-100 flex items-center justify-center min-h-screen">
        <div class="w-full max-w-md p-8 space-y-8 bg-white rounded-xl shadow-lg">
            <div>
                <h2 class="mt-6 text-center text-3xl font-extrabold text-gray-900" data-i18n="onboarding.title">
                    Vervollständige dein Profil
                </h2>
                <p class="mt-2 text-center text-sm text-gray-600" data-i18n="onboarding.subtitle">
                    Fast geschafft! Wir brauchen nur noch ein paar Infos.
                </p>
            </div>
            <form id="onboarding-form" class="mt-8 space-y-6">
                <div class="rounded-md shadow-sm">
                    <div class="flex flex-col items-center space-y-4 mb-6">
                        <img
                            id="profile-image-preview"
                            src="https://placehold.co/96x96/e2e8f0/64748b?text=Foto"
                            alt="Profilbild Vorschau"
                            class="h-24 w-24 rounded-full object-cover"
                        />
                        <div>
                            <label
                                for="photo-upload"
                                class="cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50"
                            >
                                <span data-i18n="onboarding.selectPhoto">Profilbild auswählen</span>
                                <input
                                    id="photo-upload"
                                    type="file"
                                    class="sr-only"
                                    accept="image/*"
                                />
                            </label>
                        </div>
                    </div>
                    <div>
                        <label
                            for="firstName"
                            class="block text-sm font-medium text-gray-700 mb-1 px-3"
                            data-i18n="onboarding.firstName"
                            >Vorname</label
                        >
                        <input
                            id="firstName"
                            name="firstName"
                            type="text"
                            required
                            class="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm"
                            placeholder="Vorname"
                            data-i18n-placeholder="onboarding.firstName"
                        />
                    </div>
                    <div>
                        <label
                            for="lastName"
                            class="block text-sm font-medium text-gray-700 mb-1 px-3"
                            data-i18n="onboarding.lastName"
                            >Nachname</label
                        >
                        <input
                            id="lastName"
                            name="lastName"
                            type="text"
                            required
                            class="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm"
                            placeholder="Nachname"
                            data-i18n-placeholder="onboarding.lastName"
                        />
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1 px-3"
                            data-i18n="onboarding.birthdate"
                            >Geburtsdatum</label
                        >
                        <div class="flex gap-2">
                            <select
                                id="birthdate-day"
                                name="birthdate-day"
                                required
                                class="appearance-none rounded-md relative block w-1/3 px-3 py-2 border border-gray-300 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm"
                            >
                                <option value="" data-i18n="onboarding.day">Tag</option>
                            </select>
                            <select
                                id="birthdate-month"
                                name="birthdate-month"
                                required
                                class="appearance-none rounded-md relative block w-1/3 px-3 py-2 border border-gray-300 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm"
                            >
                                <option value="" data-i18n="onboarding.month">Monat</option>
                            </select>
                            <select
                                id="birthdate-year"
                                name="birthdate-year"
                                required
                                class="appearance-none rounded-md relative block w-1/3 px-3 py-2 border border-gray-300 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm"
                            >
                                <option value="" data-i18n="onboarding.year">Jahr</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label
                            for="gender"
                            class="block text-sm font-medium text-gray-700 mb-1 px-3"
                            data-i18n="onboarding.gender"
                            >Geschlecht</label
                        >
                        <select
                            id="gender"
                            name="gender"
                            required
                            class="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm"
                        >
                            <option value="" data-i18n="onboarding.selectGender">Geschlecht wählen</option>
                            <option value="male" data-i18n="onboarding.male">Männlich</option>
                            <option value="female" data-i18n="onboarding.female">Weiblich</option>
                            <option value="diverse" data-i18n="onboarding.diverse">Divers</option>
                        </select>
                    </div>
                    <div>
                        <label
                            for="sport-select"
                            class="block text-sm font-medium text-gray-700 mb-1 px-3"
                            data-i18n="onboarding.sport"
                            >Sportart</label
                        >
                        <select
                            id="sport-select"
                            name="sport"
                            required
                            class="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm"
                        >
                            <option value="" data-i18n="onboarding.selectSport">Sportart wählen...</option>
                            <!-- Wird dynamisch gefüllt -->
                        </select>
                    </div>
                </div>
                <div>
                    <button
                        type="submit"
                        id="submit-button"
                        class="group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                        data-i18n="onboarding.saveProfile"
                    >
                        Profil speichern
                    </button>
                </div>
                <p id="error-message" class="mt-2 text-center text-sm text-red-600"></p>
            </form>
        </div>

        <script type="module">
            // Initialize i18n
            import { initI18n, translatePage, setupAutoTranslate } from '/js/i18n.js';

            async function initializeI18n() {
                await initI18n();
                setupAutoTranslate();
                translatePage();
                document.documentElement.lang = localStorage.getItem('app_language') || 'de';
            }

            initializeI18n();
        </script>
        <script src="/js/update-checker.js"></script>
        <script type="module" src="/js/spa-enhancer.js"></script>
        <!-- Firebase: <script type="module" src="/js/onboarding.js"></script> -->
        <script type="module" src="/js/onboarding-supabase.js"></script>
    </body>
</html>
